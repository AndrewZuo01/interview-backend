import { useFormik } from 'formik';
import { lazy, createContext, forwardRef, memo, useContext, useState, useEffect, useRef, Fragment as Fragment$1, useCallback, Component, useMemo, createElement, Suspense } from 'react';
import np from 'react-password-checklist';
import Ou from '@mui/material/TextField';
import qu from '@mui/material/FormControl';
import Wu from '@mui/material/FormHelperText';
import Cr from '@mui/material/Stack';
import nr from '@mui/material/Box';
import Me from '@mui/material/Typography';
import Du from '@mui/material/styles/useTheme';
import { jsx, jsxs, Fragment } from 'react/jsx-runtime';
import Lu from '@mui/icons-material/Info';
import $u from '@mui/material/InputLabel';
import Jn from '@mui/material/Tooltip';
import { useToggle, useCopyToClipboard, useWindowSize, useIsFirstRender } from 'usehooks-ts';
import * as Et from 'yup';
import op from '@mui/icons-material/Visibility';
import ip from '@mui/icons-material/VisibilityOff';
import zi from '@mui/material/Alert';
import Mi from '@mui/material/Button';
import Xn from '@mui/material/IconButton';
import lp from '@mui/material/InputAdornment';
import on from '@mui/material/Link';
import Ju from '@mui/icons-material/GitHub';
import Yu from '@mui/icons-material/Google';
import ju from '@mui/icons-material/Microsoft';
import dp from '@mui/icons-material/MailOutline';
import hr from '@mui/material/styles/createTheme';
import zp from '@mui/material/styles/ThemeProvider';
import { useTheme } from '@mui/material/styles';
import { useDropzone } from 'react-dropzone';
import Wp from '@mui/material/Slider';
import pa from '@mui/material/styles/styled';
import Up from '@mui/material/Switch';
import { MuiChipsInput } from 'mui-chips-input';
import Qp from '@mui/icons-material/KeyboardArrowDown';
import { Stack, Chip } from '@mui/material';
import el from '@mui/material/Select';
import Jp from '@mui/material/MenuItem';
import ol from '@mui/material/ListSubheader';
import sl from '@mui/material/Tab';
import ul from '@mui/material/Tabs';
import Ki from '@mui/material/Avatar';
import { FileIcon, defaultStyles } from 'react-file-icon';
import vl from '@mui/material/Skeleton';
import Cl from 'swr';
import Gl from 'react-markdown';
import Xl from 'rehype-katex';
import Jl from 'rehype-raw';
import Yl from 'remark-gfm';
import jl from 'remark-math';
import Dl from 'highlight.js';
import 'highlight.js/styles/monokai-sublime.css';
import Rl from '@mui/icons-material/ContentPaste';
import Ql from '@mui/material/Paper';
import tc from '@mui/material/Table';
import ec from '@mui/material/TableBody';
import ia from '@mui/material/TableCell';
import rc from '@mui/material/TableContainer';
import nc from '@mui/material/TableHead';
import oc from '@mui/material/TableRow';
import { Resizable } from 'react-resizable';
import lc from '@mui/icons-material/Close';
import cc from '@mui/material/Drawer';
import hc from '@mui/material/useMediaQuery';
import 'react-resizable/css/styles.css';
import xc from '@mui/icons-material/ArrowBack';
import kc from '@mui/material/ImageList';
import Tc from '@mui/material/ImageListItem';
import Rc from '@mui/material/AlertTitle';
import { keyframes } from '@emotion/react';
import Wc from '@mui/material/CircularProgress';
import Jc from '@mui/icons-material/ExpandLess';
import Yc from '@mui/icons-material/ExpandMore';
import rf from '@mui/icons-material/MoreVert';
import of from '@mui/material/Menu';
import df from '@mui/material/Dialog';
import hf from '@mui/material/DialogActions';
import gf from '@mui/material/DialogContent';
import yf from '@mui/material/DialogTitle';
import _f from '@mui/material/colors/grey';
import If from '@mui/icons-material/StickyNote2Outlined';
import bf from '@mui/icons-material/ThumbDownAlt';
import Ef from '@mui/icons-material/ThumbDownAltOutlined';
import Cf from '@mui/icons-material/ThumbUpAlt';
import Mf from '@mui/icons-material/ThumbUpAltOutlined';
import Tf from '@mui/icons-material/Terminal';
import $f from '@mui/material/Collapse';
import Gf from '@mui/material/Divider';
import rh from '@mui/icons-material/Restore';
import { EditorState, SelectionState, Modifier, Editor, ContentState } from 'draft-js';
import ou from 'lodash/merge';
import 'draft-js/dist/Draft.css';
import hd from '@mui/icons-material/RemoveCircleOutlineOutlined';
import zd from 'lodash/isEqual';
import jd from '@mui/icons-material/AddCircleOutlined';
import D1 from '@mui/icons-material/Tune';
import A1 from 'lodash/map';
import $1 from 'lodash/cloneDeep';
import W1 from '@mui/icons-material/ChevronRight';

var be=({count:t,inputProps:e})=>{let r=Du();return t?e?(()=>{let a=i=>{let s=t.toString(),u=s.length*8+(i?22:0);return (s.includes(".")||s.includes(","))&&(u-=6),`${u}px`};return e?jsx(Ou,{id:e.id,inputProps:{type:"number",max:e.max,min:e.min,step:e.step||1,sx:{width:a(),padding:i=>i.spacing(.5,1),fontSize:"12px",fontWeight:600,color:"text.secondary",MozAppearance:"textfield","&::-webkit-inner-spin-button, &::-webkit-outer-spin-button":{display:"none"},"&:focus":{width:a(!0),MozAppearance:"auto","&::-webkit-inner-spin-button, &::-webkit-outer-spin-button":{display:"flex"}}}},sx:{borderRadius:"6px",backgroundColor:i=>i.palette.mode==="light"?"grey.100":"grey.800","& fieldset":{border:"none"}},value:t,onChange:e.onChange}):null})():jsx(nr,{display:"flex",alignItems:"center",className:"notification-count",sx:{borderRadius:"6px",padding:"4px 8px",backgroundColor:r.palette.mode==="light"?"grey.100":"grey.800"},children:jsx(Me,{className:"notification-count",color:"text.secondary",sx:{fontSize:"12px",fontWeight:600},children:t})}):null};var tn=({id:t,label:e,tooltip:r,notificationsProps:n})=>jsxs(nr,{display:"flex",justifyContent:"space-between",width:"100%",children:[jsxs(nr,{display:"flex",gap:.5,alignItems:"center",children:[jsx($u,{htmlFor:t,sx:{fontWeight:600,fontSize:"12px",color:"grey.500"},children:e}),r?jsx(Jn,{title:r,children:jsx(Lu,{sx:{fontSize:12,color:"grey.600"}})}):null]}),n?jsx(be,{...n}):null]});var Y=t=>{let{children:e,description:r,hasError:n,id:o,label:a,notificationsProps:i,tooltip:s,sx:u}=t;return jsxs(Cr,{width:"100%",sx:u,gap:.5,children:[a?jsx(tn,{id:o,label:a,tooltip:s,notificationsProps:i}):null,jsxs(qu,{error:n,fullWidth:!0,children:[e,r?jsx(Wu,{children:r}):null]})]})};var $=({description:t,disabled:e,hasError:r,id:n,label:o,size:a="small",tooltip:i,multiline:s,endAdornment:u,...p})=>jsx(Y,{description:t,hasError:r,id:n,label:o,tooltip:i,children:jsx(Ou,{disabled:e,InputProps:{endAdornment:u},inputProps:{...p,id:n,name:n,sx:{height:a==="small"?"7px":"15px",minHeight:s?"100px":"auto"}},fullWidth:!0,multiline:s,sx:{fontSize:"14px",fontWeight:400,my:.5}})});var Mt="#FFFFFF",g={50:"#FAFAFA",100:"#F5F5F5",200:"#EEEEEE",300:"#E0E0E0",400:"#BDBDBD",500:"#9E9E9E",600:"#757575",700:"#616161",800:"#424242",850:"#303030",900:"#212121"},pt={50:"#FEEDEF",100:"#FCD1D7",200:"#FBA3B1",300:"#F9748F",400:"#F05579",500:"#F51762",600:"#DA0054",700:"#B90A47",800:"#980039",900:"#79002C"},cr={50:"#E6F5EE",100:"#CDEADE",200:"#9ED6BE",300:"#72C29E",400:"#4AAE80",500:"#20A56D",600:"#258A59",700:"#21794E",800:"#1D6844",900:"#19583A"},Fh={50:"#FFF5E6",100:"#FFEBCC",200:"#FFD699",300:"#FFC266",400:"#FFAD33",500:"#FF9900",600:"#E68A00",700:"#CC7A00",800:"#B36B00",900:"#995C00"};var Pt=({title:t,children:e,renderLogo:r})=>jsx(Cr,{sx:{backgroundColor:n=>n.palette.background.default,height:"100vh",width:"100vw",alignItems:"center",justifyContent:"center"},children:jsxs(nr,{sx:n=>({backgroundColor:o=>o.palette.background.paper,border:o=>`1px solid ${o.palette.divider}`,borderRadius:1,padding:n.spacing(5,5),maxWidth:"400px",height:"auto",maxHeight:"90%",[n.breakpoints.down("sm")]:{maxWidth:"unset",width:"100%",height:"100%"}}),children:[jsxs(Cr,{sx:{alignItems:"center",gap:3,marginBottom:3},children:[r,t?jsx(Me,{textAlign:"center",color:"text.primary",children:t}):null]}),jsx(Cr,{gap:1,paddingX:3,children:e})]})});var gi=()=>jsx("svg",{width:"24",height:"24",viewBox:"0 0 256 287",style:{fill:"inherit"},xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMinYMin meet",children:jsx("path",{d:"M203.24 231.531l-28.73-88.434 75.208-54.64h-92.966L128.019.025l-.009-.024h92.98l28.74 88.446.002-.002.024-.013c16.69 51.31-.5 109.67-46.516 143.098zm-150.45 0l-.023.017 75.228 54.655 75.245-54.67-75.221-54.656-75.228 54.654zM6.295 88.434c-17.57 54.088 2.825 111.4 46.481 143.108l.007-.028 28.735-88.429-75.192-54.63h92.944L128.004.024 128.01 0H35.025L6.294 88.434z"})});var yi=()=>jsxs("svg",{width:"24",height:"24",viewBox:"0 0 256 299",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid",children:[jsx("path",{d:"M208.752 58.061l25.771-6.636.192.283.651 155.607-.843.846-5.31.227-20.159-3.138-.302-.794V58.061M59.705 218.971l.095.007 68.027 19.767.173.133.296.236-.096 59.232-.2.252-68.295-33.178v-46.449",fill:"#7A3E65"}),jsx("path",{d:"M208.752 204.456l-80.64 19.312-40.488-9.773-27.919 4.976L128 238.878l105.405-28.537 1.118-2.18-25.771-3.705",fill:"#CFB2C1"}),jsx("path",{d:"M196.295 79.626l-.657-.749-66.904-19.44-.734.283-.672-.343L22.052 89.734l-.575.703.845.463 24.075 3.53.851-.289 80.64-19.311 40.488 9.773 27.919-4.977",fill:"#512843"}),jsx("path",{d:"M47.248 240.537l-25.771 6.221-.045-.149-1.015-155.026 1.06-1.146 25.771 3.704v146.396",fill:"#C17B9E"}),jsx("path",{d:"M82.04 180.403l45.96 5.391.345-.515.187-71.887-.532-.589-45.96 5.392v62.208",fill:"#7A3E65"}),jsx("path",{d:"M173.96 180.403L128 185.794v-72.991l45.96 5.392v62.208M196.295 79.626L128 59.72V0l68.295 33.177v46.449",fill:"#C17B9E"}),jsx("path",{d:"M128 0L0 61.793v175.011l21.477 9.954V90.437L128 59.72V0",fill:"#7A3E65"}),jsx("path",{d:"M234.523 51.425v156.736L128 238.878v59.72l128-61.794V61.793l-21.477-10.368",fill:"#C17B9E"})]});var _i=()=>jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",version:"1.1",viewBox:"0 0 196 216",xmlSpace:"preserve",children:[jsx("path",{fill:"#0198B8",d:"M66.841 183.009c.049 4.355.097 8.71-.27 13.485-11.818-6.767-23.167-14.04-34.66-21.077-3.023-1.85-6.494-2.968-9.759-4.421-1.994-5.399-3.99-10.797-5.564-16.59 2.378.369 4.526.837 6.264 1.947 12.42 7.933 24.72 16.054 37.157 23.961 2.028 1.29 4.543 1.816 6.832 2.695z",opacity:"1"}),jsx("path",{fill:"#0BE5DA",d:"M56.298 102c.85-.912 1.624-2.505 2.565-2.611 3.038-.343 6.137-.139 9.679.29 1.212 1.44 1.753 2.758 2.736 3.396 17.255 11.216 34.541 22.386 51.898 33.444 1.855 1.182 4.195 1.604 6.31 2.38-.19 1.28.077 3.15-.662 3.723-1.792 1.39-4.052 2.174-6.483 2.884-1.164-1.446-1.731-2.93-2.809-3.643-7.175-4.742-14.43-9.367-21.72-13.934-4.877-3.057-9.855-5.954-14.788-8.923-1.091-.413-2.182-.827-3.71-1.653-7.963-5.393-15.49-10.373-23.016-15.353z",opacity:"1"}),jsx("path",{fill:"#13E5D1",d:"M129.377 138.545c-2.006-.422-4.346-.844-6.201-2.026-17.357-11.058-34.643-22.228-51.898-33.444-.983-.638-1.524-1.957-2.285-3.3 3.358-.406 6.73-.473 10.563-.1 1.243 1.615 1.78 3.14 2.856 3.903 3.597 2.547 7.509 4.656 11.063 7.256 2.387 1.748 4.374 4.043 6.254 6.143-.431.113-.606.145-.713.247-.096.092-.118.261-.172.397l5.186 1.336c1.656.136 3.312.279 4.968.406 7.268.557 12.628 3.671 15.482 10.766 1.153 2.866 3.167 5.386 4.897 8.416z",opacity:"1"}),jsx("path",{fill:"#07E4E3",d:"M82.727 119.17a257.804 257.804 0 0115.086 8.759c7.29 4.567 14.544 9.192 21.719 13.934 1.078.713 1.645 2.197 2.45 3.691-2.826 1.962-5.652 3.557-9.194 5.557-2.288-4.191-4.438-7.98-6.446-11.841-3.98-7.655-7.928-7.877-13.248-.74-5.877-3.234-11.26-6.38-16.642-9.524 1.993-3.225 3.986-6.449 6.275-9.837z",opacity:"1"}),jsx("path",{fill:"#57DB45",d:"M180.423 56.014c.762 2.732 1.524 5.464 1.853 8.58-1.646-.019-3-.2-4.05-.863-9.341-5.915-18.569-12.013-27.954-17.857-6.12-3.811-12.448-7.29-18.682-10.92-.078-2.364-.156-4.729.227-7.511 11.469 6.52 22.417 13.556 33.511 20.353 4.879 2.989 10.054 5.493 15.095 8.218z",opacity:"1"}),jsx("path",{fill:"#06A3BE",d:"M66.914 182.573c-2.362-.443-4.877-.97-6.905-2.259-12.437-7.907-24.737-16.028-37.157-23.96-1.738-1.11-3.886-1.58-6.217-2.344-.464-.472-.555-.944-.662-2.2.014-2.802.045-4.819.445-6.821 4.9 2.647 9.35 5.428 13.983 7.865 3.738 1.966 7.696 3.516 11.557 5.25 5.502 9.625 13.99 15.097 25.029 17.64 0 2.146 0 4.27-.073 6.83z",opacity:"1"}),jsx("path",{fill:"#088FB2",d:"M22.181 171.339c3.236 1.11 6.707 2.227 9.73 4.078 11.493 7.036 22.842 14.31 34.591 21.536.346 1.483.346 2.924.346 4.552-19.021-2.271-32.731-12.099-42.868-27.5-.534-.811-1.177-1.55-1.799-2.666z",opacity:"1"}),jsx("path",{fill:"#5CDB3C",d:"M180.408 55.677c-5.026-2.388-10.201-4.892-15.08-7.881-11.094-6.797-22.042-13.833-33.376-20.778-.418-2.055-.51-4.103-.145-6.568 1.673.084 3 .414 4.09 1.112 10.474 6.71 20.862 13.554 31.389 20.18 2.318 1.459 5.084 2.206 7.644 3.281 1.821 3.44 3.642 6.878 5.478 10.654z",opacity:"1"}),jsx("path",{fill:"#59DD55",d:"M131.458 35.376c6.366 3.207 12.693 6.687 18.814 10.498 9.385 5.844 18.613 11.942 27.954 17.857 1.05.664 2.404.844 3.974 1.244.501 2.046.646 4.098.38 6.545-7.279-3.892-14.065-8.316-21.058-12.385-2.192-1.275-4.942-1.59-7.436-2.346-5.384-3.857-10.328-8.777-16.286-11.25-5.178-2.148-7.703-4.195-6.342-10.163z",opacity:"1"}),jsx("path",{fill:"#01E3E3",d:"M15.447 90.994c-.065-4.355-.131-8.71.255-13.521 2.615.575 4.824 1.524 6.932 2.657 5.425 2.916 10.805 5.913 16.203 8.878.046 4.358.092 8.716-.295 13.527-3.835-1.435-7.207-3.382-10.647-5.197-4.118-2.173-8.296-4.234-12.448-6.344z",opacity:"1"}),jsx("path",{fill:"#22E3B4",d:"M100.982 92.49c-5.371.802-10.758 1.513-16.107 2.443-2.781.484-4.543-.264-5.988-2.802-3.166-5.56-6.618-10.957-10.33-17.038 2.094-1.064 3.92-1.994 6.137-2.627 1.35 1.37 2.138 2.71 3.302 3.476 6.054 3.99 12.27 7.737 18.282 11.79 1.813 1.222 3.15 3.153 4.704 4.759z",opacity:"1"}),jsx("path",{fill:"#66DB3A",d:"M174.883 44.68c-2.513-.732-5.279-1.48-7.597-2.938-10.527-6.626-20.915-13.47-31.39-20.18-1.09-.698-2.416-1.028-3.964-1.533-1.176-3.157-.493-4.067 3.096-3.379 17.434 3.343 30.305 13.045 39.855 28.03z",opacity:"1"}),jsx("path",{fill:"#07E4E3",d:"M173.516 175.205c-2.971 3.499-5.943 6.998-9.27 10.29-4.452-3.19-8.447-6.328-12.682-9.1-2.676-1.75-5.71-2.954-8.585-4.403 3.165-2.552 6.33-5.105 10.158-7.814 2.674.924 4.708 1.962 6.688 3.095 4.578 2.62 9.13 5.285 13.691 7.932z",opacity:"1"}),jsx("path",{fill:"#19E3BC",d:"M128.157 117.563c-5.08.066-10.162.133-15.708-.24-1.486-1.621-2.32-3.067-3.56-3.937-4.746-3.333-9.7-6.372-14.403-9.762-1.448-1.044-2.341-2.857-3.488-4.318 5.015-.057 10.03-.114 15.524.242 1.13 1.272 1.615 2.373 2.46 2.95 4.987 3.41 10.154 6.566 15.047 10.101 1.69 1.22 2.77 3.285 4.128 4.964z",opacity:"1"}),jsx("path",{fill:"#26E2A8",d:"M101.374 92.561c-1.947-1.676-3.283-3.607-5.096-4.83-6.011-4.052-12.228-7.798-18.282-11.789-1.164-.767-1.951-2.106-2.947-3.525 2.391-1.668 4.817-2.992 7.748-4.059 2.898 1.398 5.29 2.537 7.683 3.677 1.158 2.159 2.405 4.276 3.453 6.487 1.481 3.128 3.688 4.935 8.075 4.528 3.838 2.53 6.91 5.09 9.981 7.649-3.408.644-6.815 1.289-10.615 1.862z",opacity:"1"}),jsx("path",{fill:"#52DD5A",d:"M154.217 57.132c2.363.412 5.113.728 7.305 2.003 6.993 4.069 13.78 8.493 20.991 12.823.386 3.074.426 6.106.057 9.544-8.285-4.232-16.162-8.87-24.038-13.508a10797.74 10797.74 0 01-4.315-10.862z",opacity:"1"}),jsx("path",{fill:"#00CFD8",d:"M16.05 144.975c-.032 2.016-.063 4.033-.11 6.474-.266-1.494-.726-3.41-.731-5.328-.036-15.064.016-30.13.484-45.645 2.058.335 3.731 1.02 5.277 1.925 5.976 3.495 11.912 7.06 17.863 10.6.047 2.703.095 5.406-.273 8.51-7.515-3.888-14.615-8.178-22.472-12.926 0 3.858 0 6.64-.026 9.87-.011 3.147.004 5.844-.011 8.991-.014 3.152.002 5.853-.008 9.004-.015 3.14-.004 5.833.006 8.525z",opacity:"1"}),jsx("path",{fill:"#22E2AA",d:"M112.026 99.266c3.355-.08 6.71-.16 10.58.153 7.661 4.795 14.808 9.196 21.955 13.596v4.757c-3.706 0-7.16 0-11.087-.418-1.152-1.264-1.678-2.334-2.536-2.918-5.006-3.407-10.197-6.553-15.088-10.114-1.635-1.19-2.57-3.343-3.824-5.056z",opacity:"1"}),jsx("path",{fill:"#0BE5DA",d:"M38.909 88.559c-5.47-2.516-10.85-5.513-16.275-8.429-2.108-1.133-4.317-2.082-6.836-3.111-.392-3.025-.428-6.053-.01-9.536 2.605.583 4.8 1.543 6.903 2.674 5.414 2.913 10.786 5.902 16.176 8.86.038 3.03.076 6.062.042 9.542z",opacity:"1"}),jsx("path",{fill:"#04D9DF",d:"M142.637 172.105c3.216 1.336 6.251 2.54 8.927 4.29 4.235 2.772 8.23 5.91 12.376 9.23-1.94 2.225-3.928 4.112-6.416 5.68-2.805-2.126-5.087-3.967-7.423-5.736-4.688-3.55-9.406-7.062-14.111-10.59 2.101-.92 4.203-1.841 6.647-2.874z",opacity:"1"}),jsx("path",{fill:"#07E4E3",d:"M56.216 102.46c7.609 4.52 15.135 9.5 22.722 14.795-7.345.314-14.751.314-22.804.314 0-4.869 0-9.758.082-15.108z",opacity:"1"}),jsx("path",{fill:"#00D9DE",d:"M38.904 112.552c-6.022-3.09-11.958-6.656-17.934-10.151-1.546-.904-3.22-1.59-5.178-2.382-.41-2.718-.475-5.43-.443-8.582 4.25 1.667 8.428 3.728 12.546 5.9 3.44 1.816 6.812 3.763 10.576 5.658.41 3.04.456 6.074.433 9.557z",opacity:"1"}),jsx("path",{fill:"#02ABC3",d:"M16.418 144.989c-.38-2.706-.39-5.398-.012-8.534 2.24.512 4.135 1.395 5.936 2.439 5.769 3.34 11.503 6.74 17.25 10.117.75 2.772 1.498 5.544 2.306 8.705-3.801-1.346-7.759-2.896-11.497-4.862-4.633-2.437-9.084-5.218-13.983-7.865z",opacity:"1"}),jsx("path",{fill:"#14E4C7",d:"M90.544 99.234c1.6 1.533 2.494 3.346 3.942 4.39 4.703 3.39 9.657 6.43 14.404 9.762 1.239.87 2.073 2.316 3.106 3.838-2.395.419-4.804.497-7.903.314-1.82-.378-2.949-.495-4.078-.611-2.166-2.05-4.153-4.345-6.54-6.093-3.554-2.6-7.466-4.71-11.063-7.256-1.077-.763-1.613-2.288-2.409-3.804 3.355-.43 6.722-.521 10.541-.54z",opacity:"1"}),jsx("path",{fill:"#00BDCD",d:"M16.08 126.997c-.014-2.698-.029-5.395.343-8.539 2.267.537 4.164 1.488 6.024 2.508 5.47 2.998 10.925 6.023 16.386 9.038.048 3.032.096 6.064-.268 9.501-7.769-3.9-15.127-8.204-22.484-12.508z",opacity:"1"}),jsx("path",{fill:"#14E4C7",d:"M39.985 66.998c-.326 2.73-.653 5.46-1.395 8.557-1.717-.33-3.022-1.016-4.317-1.721-6.023-3.282-12.043-6.569-18.064-9.854.57-2.436 1.14-4.873 2.25-7.643a29.74 29.74 0 017.06 2.707c4.853 2.594 9.648 5.296 14.466 7.954z",opacity:"1"}),jsx("path",{fill:"#02B4C8",d:"M16.05 127.446c7.388 3.855 14.746 8.16 22.445 12.509.642 2.778.942 5.511 1.17 8.65-5.82-2.971-11.554-6.371-17.323-9.711-1.801-1.044-3.695-1.927-5.91-2.888-.379-2.707-.395-5.408-.381-8.56z",opacity:"1"}),jsx("path",{fill:"#00C6D3",d:"M38.904 129.564c-5.532-2.575-10.987-5.6-16.457-8.598a74.807 74.807 0 00-5.998-2.956c-.36-2.785-.36-5.567-.36-9.425 7.856 4.748 14.956 9.038 22.4 13.372.391 2.418.439 4.792.415 7.607z",opacity:"1"}),jsx("path",{fill:"#19E3BC",d:"M159.333 145.996c0-2.371 0-4.742.456-7.537 2.769.814 5.081 2.052 7.395 3.286 5.17 2.758 10.34 5.513 15.511 8.27-.218 2.093-.435 4.186-1.201 6.632-2.487-.413-4.517-1.009-6.349-1.978-5.313-2.81-10.547-5.771-15.812-8.673z",opacity:"1"}),jsx("path",{fill:"#36E087",d:"M43.012 25.04c1.452-.952 2.904-1.903 4.846-2.6 6.652 4.024 12.816 7.791 18.98 11.558-.346 3.21-.692 6.42-1.446 9.266-1.63-1.61-2.685-3.108-4.105-4.06-4.952-3.319-10.12-6.323-15.008-9.73-1.426-.994-2.196-2.93-3.267-4.434z",opacity:"1"}),jsx("path",{fill:"#22E2AA",d:"M182.848 137.005c.043 2.042.085 4.084-.298 6.554-5.814-2.777-11.152-6.073-16.617-9.141-1.954-1.097-4.217-1.646-6.338-2.445-.083-2.362-.166-4.724.204-7.511 1.925.273 3.46.865 4.857 1.688 6.086 3.582 12.132 7.23 18.192 10.855z",opacity:"1"}),jsx("path",{fill:"#10D2DA",d:"M135.591 174.997c5.104 3.51 9.822 7.021 14.51 10.572 2.336 1.769 4.618 3.61 7.07 5.788-1.752 1.637-3.65 2.903-5.878 3.865-6.792-4.604-13.253-8.903-19.714-13.201-.304-3.114-1.881-6.883 4.012-7.024z",opacity:"1"}),jsx("path",{fill:"#2EE29A",d:"M182.85 123.001c.044 2.044.088 4.087-.298 6.559-2.865-.817-5.323-2.023-7.734-3.316-5.092-2.732-10.158-5.51-15.235-8.268-.083-2.367-.165-4.733.205-7.523 1.196-.108 1.986.128 2.677.533 6.804 3.99 13.593 8.006 20.386 12.015z",opacity:"1"}),jsx("path",{fill:"#34E192",d:"M42.672 25.09c1.41 1.454 2.181 3.39 3.607 4.384 4.889 3.407 10.056 6.411 15.008 9.73 1.42.952 2.475 2.45 3.713 4.031a22.66 22.66 0 01-6.684 2.299c-1.223-1.3-1.863-2.572-2.894-3.245-6.364-4.15-12.816-8.163-19.239-12.223 2.05-1.641 4.1-3.283 6.489-4.975z",opacity:"1"}),jsx("path",{fill:"#2EE29A",d:"M35.89 30.195a473.368 473.368 0 0119.532 12.094c1.031.673 1.67 1.946 2.525 3.284-1.092.995-2.22 1.647-4.042 2.354a312.328 312.328 0 01-19.87-11.69c-.703-.449-.679-2.038-.991-3.097.85-.94 1.7-1.878 2.845-2.945z",opacity:"1"}),jsx("path",{fill:"#3CDF74",d:"M182.838 95.002c.044 2.044.087 4.087-.3 6.558-3.87-1.491-7.28-3.461-10.755-5.314-4.021-2.144-8.098-4.185-12.151-6.27-.091-2.039-.182-4.078.203-6.542a33.016 33.016 0 018.01 3.094c5.042 2.744 10 5.64 14.993 8.474z",opacity:"1"}),jsx("path",{fill:"#38DF7C",d:"M159.495 90.398c4.19 1.663 8.267 3.704 12.288 5.848 3.474 1.853 6.886 3.823 10.687 5.747.41 2.048.456 4.09.076 6.562-3.872-1.488-7.29-3.459-10.77-5.313-4.032-2.148-8.117-4.193-12.179-6.283-.08-2.046-.159-4.092-.102-6.56z",opacity:"1"}),jsx("path",{fill:"#04D9DF",d:"M76.254 129.3c5.58 2.85 10.963 5.996 16.54 9.41-.633 2.14-1.462 4.01-2.936 6.076-6.049-3.127-11.451-6.45-16.854-9.775a537.765 537.765 0 013.25-5.712z",opacity:"1"}),jsx("path",{fill:"#44DE6C",d:"M182.906 94.568c-5.06-2.4-10.019-5.296-15.06-8.04-2.43-1.322-5.018-2.355-7.879-3.514-.47-2.047-.597-4.1-.263-6.583 3.218.886 6.032 2.098 8.72 3.542 4.845 2.602 9.615 5.343 14.416 8.026.045 2.045.09 4.09.066 6.57z",opacity:"1"}),jsx("path",{fill:"#34E192",d:"M182.917 122.567c-6.86-3.575-13.648-7.592-20.452-11.581-.691-.405-1.48-.641-2.552-.96-.413-1.73-.498-3.454-.111-5.598 3.012.683 5.653 1.602 8.073 2.927 5.055 2.769 9.993 5.751 14.98 8.646.043 2.044.086 4.088.062 6.566z",opacity:"1"}),jsx("path",{fill:"#0BE5DA",d:"M173.79 175.063c-4.836-2.505-9.387-5.17-13.965-7.79a75.774 75.774 0 00-6.388-3.251 24.082 24.082 0 013.526-6.486c6.92 4.175 13.374 8.288 19.829 12.401-.91 1.662-1.818 3.323-3.001 5.126z",opacity:"1"}),jsx("path",{fill:"#00C6D3",d:"M131.465 182.46c6.575 3.86 13.036 8.158 19.505 12.8-2.413 1.401-4.832 2.458-7.663 3.16-4.167-2.713-7.922-5.073-11.677-7.433-.093-2.696-.186-5.393-.165-8.528z",opacity:"1"}),jsx("path",{fill:"#14E4C7",d:"M159.236 146.383c5.362 2.515 10.596 5.475 15.909 8.286 1.832.97 3.862 1.565 6.17 2.331-.242 2.213-.853 4.426-2.005 6.782-4.846-2.523-9.07-5.332-13.486-7.796-2.34-1.306-5.014-2.011-7.537-2.988.284-2.076.568-4.152.949-6.615z",opacity:"1"}),jsx("path",{fill:"#48DD63",d:"M182.907 87.574c-4.868-2.258-9.638-5-14.482-7.601-2.69-1.444-5.503-2.656-8.62-3.972-.713-2.409-1.067-4.818-1.347-7.617 7.95 4.248 15.827 8.886 24.044 13.568.385 1.761.428 3.479.405 5.622z",opacity:"1"}),jsx("path",{fill:"#3BE189",d:"M182.921 115.566c-5.053-2.46-9.99-5.442-15.046-8.21-2.42-1.326-5.061-2.245-7.952-3.343-.431-2.064-.513-4.132-.46-6.628 4.196 1.664 8.281 3.71 12.312 5.857 3.48 1.854 6.899 3.825 10.708 5.747.41 2.05.457 4.096.438 6.577z",opacity:"1"}),jsx("path",{fill:"#22E2AA",d:"M47.885 52.757c-.817.965-1.634 1.931-3.08 3.02-7.014-4.162-13.399-8.447-19.784-12.732.813-1.245 1.626-2.49 3.083-3.849 4.956 2.48 9.387 4.9 13.535 7.734 2.324 1.588 4.18 3.862 6.246 5.827z",opacity:"1"}),jsx("path",{fill:"#19E3BC",d:"M40.25 66.76c-5.083-2.42-9.878-5.122-14.731-7.716-2.112-1.129-4.343-2.034-6.888-3.041.25-1.793.87-3.585 2.047-5.683 2.473.551 4.455 1.287 6.292 2.287 5.016 2.732 9.972 5.576 14.952 8.376-.47 1.846-.939 3.692-1.673 5.776z",opacity:"1"}),jsx("path",{fill:"#22E3B4",d:"M42.186 60.792c-5.244-2.609-10.2-5.453-15.216-8.185-1.837-1-3.819-1.736-6.082-2.585.951-2.219 2.25-4.445 3.84-6.824 6.678 4.132 13.063 8.417 19.794 12.73-.46 1.576-1.266 3.124-2.336 4.864zM159.464 132.392c2.252.38 4.515.929 6.469 2.026 5.465 3.068 10.803 6.364 16.552 9.575.379 1.73.397 3.455.313 5.601-5.273-2.336-10.444-5.091-15.614-7.849-2.314-1.234-4.626-2.472-7.27-3.712-.414-1.743-.497-3.483-.45-5.641z",opacity:"1"}),jsx("path",{fill:"#2CE2A4",d:"M159.455 118.395c5.205 2.34 10.271 5.117 15.363 7.849a115.926 115.926 0 007.67 3.75c.408 2.051.453 4.097.429 6.578-6.13-3.191-12.175-6.84-18.26-10.422-1.399-.823-2.933-1.415-4.735-2.115-.418-1.742-.506-3.481-.467-5.64z",opacity:"1"}),jsx("path",{fill:"#34E192",d:"M107.005 77c.83-1.862 1.66-3.724 3.114-5.754 6.028 3.442 11.431 7.05 16.835 10.66-.85 1.562-1.7 3.124-3.171 4.838-6.008-3.147-11.393-6.445-16.778-9.743z",opacity:"1"}),jsx("path",{fill:"#13E5D1",d:"M158.124 153.32c2.686.655 5.36 1.36 7.7 2.666 4.416 2.464 8.64 5.273 13.304 8.085-.331 1.922-1.024 3.697-2.027 5.67-6.764-3.917-13.219-8.03-19.872-12.406.112-1.406.422-2.55.895-4.015z",opacity:"1"}),jsx("path",{fill:"#10D2DA",d:"M72.707 135.176c5.7 3.16 11.102 6.483 16.876 9.808-.464 1.924-1.298 3.846-2.388 6.357l-18.676-9.997c1.469-2.266 2.68-4.134 4.188-6.168z",opacity:"1"}),jsx("path",{fill:"#40E28D",d:"M127.235 81.727c-5.685-3.43-11.088-7.04-16.845-10.681.36-1.67 1.074-3.307 2.092-5.642l18.892 9.704c-1.531 2.556-2.695 4.498-4.14 6.619z",opacity:"1"}),jsx("path",{fill:"#32E29F",d:"M106.734 77.187c5.656 3.112 11.04 6.41 16.77 9.736-2.041 4.98-6.953 2.77-11.099 3.845-3.487-2.629-6.559-5.188-9.995-7.75 1.108-1.883 2.581-3.764 4.324-5.83z",opacity:"1"}),jsx("path",{fill:"#26E2A8",d:"M144.662 112.586c-7.248-3.971-14.395-8.372-21.603-13.101 3.302-.374 6.663-.42 10.541-.073 4.004 2.466 7.492 4.54 10.98 6.613.06 2.044.121 4.088.082 6.561z",opacity:"1"}),jsx("path",{fill:"#2CE2A4",d:"M48.197 52.661c-2.379-1.87-4.234-4.143-6.558-5.731-4.148-2.835-8.579-5.255-13.244-7.882 1.117-1.9 2.587-3.768 4.353-5.772.608.923.584 2.512 1.287 2.96 6.318 4.029 12.765 7.857 19.54 11.745-1.446 1.528-3.256 3.057-5.378 4.68z",opacity:"1"}),jsx("path",{fill:"#38DF7C",d:"M66.904 33.565c-6.23-3.334-12.394-7.101-18.71-11.163a27.463 27.463 0 017.47-3.006c3.998 2.755 7.584 5.18 11.17 7.604.045 2.043.09 4.087.07 6.565z",opacity:"1"}),jsx("path",{fill:"#00BDCD",d:"M131.497 191.427c3.888 1.92 7.643 4.28 11.448 6.969-3.55 1.412-7.15 2.496-11.582 3.83 0-3.906 0-7.133.134-10.8z",opacity:"1"}),jsx("path",{fill:"#32E6BE",d:"M111.61 99.179c1.67 1.8 2.605 3.952 4.24 5.143 4.89 3.56 10.082 6.707 15.088 10.114.858.584 1.384 1.654 2.086 2.837-1.387.386-2.797.437-4.537.388-1.688-1.777-2.768-3.841-4.458-5.062-4.893-3.535-10.06-6.69-15.047-10.1-.845-.578-1.33-1.68-2-2.884 1.392-.404 2.802-.464 4.628-.436z",opacity:"1"}),jsx("path",{fill:"#3CDF74",d:"M66.901 26.546c-3.653-1.97-7.239-4.395-10.86-7.165 3.35-1.367 6.735-2.387 10.928-3.65 0 3.915 0 7.138-.068 10.815z",opacity:"1"}),jsx("path",{fill:"#23E0D5",d:"M16.109 64.287c6.121 2.978 12.14 6.265 18.164 9.547 1.295.705 2.6 1.392 4.249 2.12.395.793.442 1.553.417 2.688-5.462-2.583-10.834-5.572-16.248-8.485-2.103-1.131-4.298-2.09-6.798-3.113-.193-.806-.039-1.628.216-2.757z",opacity:"1"}),jsx("path",{fill:"#32E29F",d:"M144.68 105.59c-3.588-1.639-7.076-3.712-10.626-6.115 3.355-.33 6.772-.33 10.726-.33 0 2.18 0 4.094-.1 6.444zM90.45 71.705c-2.363-.81-4.755-1.95-7.3-3.396.974-1.133 2.102-1.96 3.466-2.96 1.41 2.235 2.607 4.13 3.834 6.356z",opacity:"1"}),jsx("path",{fill:"#32E6BE",d:"M99.73 116.977c1.414.066 2.543.183 3.91.537.249.441.26.644.33 1.145-1.669-.147-3.397-.593-5.126-1.038.054-.136.076-.305.172-.397.107-.102.282-.134.713-.247z",opacity:"1"})]});var xi=()=>jsx("svg",{version:"1.2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1594 1595",width:"24",height:"24",style:{fill:"inherit"},children:jsx("path",{fillRule:"evenodd",d:"m877 11.5l-32.8 403.8c-15.5-1.8-31-2.7-46.9-2.7-19.9 0-39.4 1.3-58.5 4.4l-18.6-195.6c-0.4-6.2 4.5-11.6 10.7-11.6h33.2l-16-197.8c-0.4-6.2 4.5-11.6 10.2-11.6h108.5c6.2 0 11.1 5.4 10.2 11.1zm-166.1 410.4c-35 8-68.2 20.8-98.8 37.6l-84.6-177.5c-2.6-5.3 0-11.9 5.8-14.2l31.4-11.5-82.8-180.6c-2.6-5.3 0-11.9 5.8-14.2l101.9-37.2c5.7-2.2 11.9 1.4 13.7 7.1 0.4 0 107.6 390.5 107.6 390.5zm-357.4-278l234.3 330.2c-29.7 19.5-56.7 42.5-79.7 69.1l-140.5-138.1c-4.4-4.4-3.9-11.5 0.5-15.5l25.7-21.3-139.6-141.2c-4.4-4.4-3.9-11.5 0.9-15.5l82.9-69.5c4.8-4 11.5-3.1 15 1.8zm136.9 421.4c-21.3 27.9-38.5 58.9-51.4 92.1l-178.9-81.9c-5.8-2.2-8-9.3-4.9-14.6l16.8-28.8-179.8-85c-5.3-2.6-7.5-9.3-4.4-14.6l54-93.8c3.1-5.3 10.2-7.1 15.1-3.6zm-466 24.8c0.9-6.2 7.1-9.7 12.8-8.4l392 102.3c-10.2 33.2-15.9 68.2-16.8 104.5l-196.2-16c-6.2-0.4-10.7-6.2-9.3-12.4l5.7-32.7-198-18.6c-6.2-0.5-10.1-6.2-9.3-12.4l18.6-106.7zm-15 264.7l403.5-37.2c1.8 35.9 8.9 70.9 19.9 103.6l-189.5 52.3c-5.8 1.3-12-2.2-12.9-8.4l-5.7-32.8-192.3 50c-5.7 1.4-11.9-2.2-12.8-8.4l-19.1-106.7c-0.9-6.2 3.1-11.9 9.3-12.4zm63.4 280.7c-3.1-5.3-0.9-11.9 4.4-14.6l365.9-173.5c13.7 32.7 32.3 63.3 54.4 90.7l-160.3 114.2c-4.9 3.6-12 2.2-15.1-3.1l-16.8-29.2-163.4 112.9c-4.9 3.5-12 1.8-15.1-3.5 0 0-54.5-93.9-54-93.9zm525.7-9.3l-111.6 162c-3.5 5.4-10.6 6.2-15.5 2.3l-25.7-21.7-115.1 162c-3.6 4.9-10.2 5.8-15.1 1.8l-83.3-69.5c-4.8-4-5.3-11.1-0.9-15.5l284.8-288.2c24.4 25.6 52.3 48.2 82.4 66.8zm-138.6 395.8c-5.8-2.2-8.4-8.9-5.8-14.2l168.8-368.3c31 15.9 64.7 27.9 99.7 34.5l-49.7 190.4c-1.3 5.7-7.9 9.3-13.7 7.1l-31.4-11.5-52.7 191.7c-1.8 5.7-8 9.3-13.8 7l-101.8-37.1zm337.5-340c19.9 0 39.4-1.4 58.4-4.5l18.6 195.7c0.5 6.2-4.4 11.5-10.6 11.5h-33.2l15.9 197.9c0.9 6.2-3.9 11.5-10.1 11.5h-108.6c-5.7 0-10.6-5.3-10.2-11.5l32.8-403.7c15.5 2.2 31 3.1 47 3.1zm174.5-728.3c-31-15.5-64.2-27.5-99.7-34.5l49.6-190.4c1.8-5.8 8-9.3 13.8-7.1l31.4 11.5 52.7-191.7c1.8-5.7 8-9.3 13.8-7.1l101.8 37.2c5.8 2.2 8.5 8.4 5.8 14.2zm391.6-207.2l-284.9 288.2c-23.9-25.7-51.3-48.2-81.9-66.8l111.6-162.1c3.6-4.8 10.7-6.2 15.5-2.2l25.7 21.7 115.2-162c3.5-4.9 10.6-5.8 15-1.8l83.3 69.5c4.9 4 4.9 11.1 0.5 15.5zm153.7 227.1l-365.9 173.6c-14.2-32.8-32.3-63.4-54.5-90.8l160.3-114.2c4.9-4 12-2.2 15.1 3.1l16.8 28.8 163.5-112.9c4.9-3.1 11.9-1.8 15 3.5l54.5 93.9c3.1 5.3 1.4 11.9-4.4 14.6zm58 146.5l18.6 106.7c0.9 6.2-3.1 11.5-9.3 12.4l-403.5 37.6c-1.8-36.3-8.9-70.8-19.9-103.6l189.6-52.2c5.7-1.8 11.9 2.2 12.8 8.4l5.8 32.8 192.2-50.1c5.8-1.3 12 2.3 12.8 8.5zm-18.6 391.3l-392-102.3c10.2-33.2 16-68.1 16.9-104.4l196.2 15.9c6.2 0.9 10.2 6.2 9.3 12.4l-5.8 32.8 198 18.6c6.2 0.8 10.2 6.1 9.3 12.3l-18.6 106.7c-0.9 6.2-7.1 9.8-12.8 8.5zm-104.1 243.9c-3.1 5.3-10.2 6.6-15.1 3.5l-333.5-230.2c21.3-27.9 38.5-58.9 51.4-92.1l178.9 81.9c5.8 2.7 8 9.3 4.9 14.6l-16.8 28.8 179.8 85c5.3 2.7 7.5 9.3 4.4 14.6zm-446.5-135.9c29.7-19 56.3-42.5 79.8-69l140.4 138.1c4.4 4.4 4.4 11.5-0.5 15.5l-25.7 21.2 139.6 141.3c4 4.4 4 11.5-0.9 15.4l-82.8 69.6c-4.5 3.9-11.6 3.1-15.1-1.8l-234.3-330.3zm-1.8 449.8c-5.7 2.2-11.9-1.3-13.7-7.1l-107.2-390.4c35-8 68.2-20.8 98.8-37.7l84.6 177.6c2.6 5.7 0 12.4-5.8 14.1l-31.4 11.5 82.8 180.7c2.6 5.7 0 11.9-5.8 14.1l-101.8 37.2z"})});function Qu(t){return t.charAt(0).toUpperCase()+t.slice(1)}function tp(t){switch(t){case"azure-ad":return "Microsoft";case"github":return "GitHub";case"okta":return "Okta";case"descope":return "Descope";case"aws-cognito":return "Coginto";default:return Qu(t)}}function ep(t){switch(t){case"google":return jsx(Yu,{});case"github":return jsx(Ju,{});case"azure-ad":return jsx(ju,{});case"okta":return jsx(xi,{});case"auth0":return jsx(gi,{});case"descope":return jsx(_i,{});case"aws-cognito":return jsx(yi,{});default:return null}}var Si=({provider:t,onClick:e,isSignIn:r})=>jsx(Mi,{variant:"outlined",color:"inherit",startIcon:ep(t.toLowerCase()),onClick:e,sx:{width:"100%",textTransform:"none",borderColor:g[400],padding:1.5,paddingLeft:3,justifyContent:"flex-start"},children:`${r?"Continue":"Sign up"} with ${tp(t)}`});var Ei={default:"Unable to sign in.",signin:"Try signing in with a different account.",oauthsignin:"Try signing in with a different account.",redirect_uri_mismatch:"The redirect URI is not matching the oauth app configuration.",oauthcallbackerror:"Try signing in with a different account.",oauthcreateaccount:"Try signing in with a different account.",emailcreateaccount:"Try signing in with a different account.",callback:"Try signing in with a different account.",oauthaccountnotlinked:"To confirm your identity, sign in with the same account you used originally.",emailsignin:"The e-mail could not be sent.",emailverify:"Please verify your email, a new email has been sent.",credentialssignin:"Sign in failed. Check the details you provided are correct.",sessionrequired:"Please sign in to access this page."},cp=t=>t?Ei[t.toLowerCase()]??Ei.default:"",fp=({title:t,error:e,providers:r,callbackUrl:n,onPasswordSignIn:o,onOAuthSignIn:a,onForgotPassword:i,onSignUp:s,renderLogo:u,passwordChecklistSettings:p})=>{let[l,f]=useState(!1),[c,d]=useState(!p),[m,h]=useToggle(!0),[_,v]=useToggle(),[I,x]=useState(e),P=a&&r.length;useEffect(()=>{x(void 0),b.resetForm();},[m]),useEffect(()=>{x(e);},[e]);let b=useFormik({initialValues:{email:"",password:""},validationSchema:Et.object({email:Et.string().required(),password:Et.string().required()}),onSubmit:async({email:q,password:ut})=>{if(f(!0),!!o)try{m?await o(q,ut,n):s&&await s(q,ut,n);}catch(Wt){Wt instanceof Error&&x(Wt.message);}finally{f(!1);}},validateOnBlur:!0});return jsxs(Pt,{title:t,renderLogo:u,children:[I?jsx(zi,{sx:{my:1},severity:"error",children:cp(I)}):null,o?jsxs("form",{onSubmit:b.handleSubmit,children:[jsx($,{id:"email",placeholder:"Email address",size:"medium",value:b.values.email,hasError:!!b.errors.email,description:b.touched.email?b.errors.email:void 0,onBlur:b.handleBlur,onChange:q=>b.setFieldValue("email",q.target.value)}),jsx($,{id:"password",placeholder:"Password",value:b.values.password,hasError:!!b.errors.password,description:b.touched.password?b.errors.password:void 0,onBlur:b.handleBlur,onChange:q=>b.setFieldValue("password",q.target.value),type:_?"text":"password",size:"medium",endAdornment:jsx(lp,{position:"end",children:jsx(Xn,{"aria-label":"toggle password visibility",onClick:v,children:_?jsx(ip,{}):jsx(op,{})})})}),!m&&b.values.password.length&&p?jsxs(nr,{sx:{border:1,marginTop:1,padding:1.5,borderRadius:1,borderColor:"grey.400","& .checklist-icon":{marginTop:.5},fontSize:14},children:["Your password must contain:",jsx(np,{rules:p.rules,minLength:p.minLength,maxLength:p.maxLength,value:b.values.password,messages:p.messages,onChange:d})]}):null,m&&i?jsx(on,{href:"#",marginTop:1,onClick:i,children:"Forgot password?"}):null,jsx(Mi,{type:"submit",disabled:l||!m&&!c,variant:"contained",sx:{marginTop:3,width:"100%"},children:"Continue"})]}):null,s?jsx(Cr,{direction:"row",alignItems:"center",gap:.5,marginTop:1,children:m?jsxs(Fragment,{children:[jsx(Me,{color:"text.primary",children:"Don't have an account?"}),jsx(on,{component:"button",onClick:h,children:"Sign Up"})]}):jsxs(Fragment,{children:[jsx(Me,{color:"text.primary",children:"Already have an account?"}),jsx(on,{component:"button",onClick:h,children:"Sign In"})]})}):null,o&&P?jsx(Me,{color:"text.primary",sx:{alignItems:"center",direction:"row",display:"flex",gap:2,marginTop:1,width:"100%",":before, :after":{content:'""',borderBottom:`1px solid ${g[400]}`,height:"0.5px",flex:"1 0 auto"}},children:"OR"}):null,P?jsx(Cr,{color:"text.primary",marginTop:1,gap:1,children:r.map((q,ut)=>jsx(Si,{isSignIn:m,provider:q,onClick:()=>a(q,n)},`provider-${ut}`))}):null]})};var _p=({onGoBack:t,onContinue:e})=>{let[r,n]=useState(!1),[o,a]=useState(""),[i,s]=useState(!1),u=useFormik({initialValues:{email:""},validationSchema:Et.object({email:Et.string().email().required()}),onSubmit:async({email:p})=>{n(!0);try{await e(p),s(!0);}catch(l){l instanceof Error&&a(l.message);}finally{n(!1);}},validateOnBlur:!0,validateOnChange:!1});return jsxs(Pt,{renderLogo:i?jsx(nr,{sx:{border:3,borderColor:"success.main",borderRadius:50,width:60,height:60,display:"grid",placeItems:"center"},children:jsx(dp,{color:"success",fontSize:"large"})}):void 0,title:i?`Please check the email address ${u.values.email} for instructions to reset your password.`:"Enter your email address and we will send you instructions to reset your password.",children:[o?jsx(zi,{sx:{my:1},severity:"error",children:o}):null," ",i?jsx(Mi,{onClick:()=>u.handleSubmit(),color:"success",variant:"outlined",sx:{marginTop:1},children:"Resend email"}):jsxs("form",{onSubmit:u.handleSubmit,children:[jsx($,{id:"email",placeholder:"Email adress",size:"medium",value:u.values.email,hasError:!!u.errors.email,description:u.errors.email,onBlur:u.handleBlur,onChange:p=>u.setFieldValue("email",p.target.value)}),jsx(Mi,{type:"submit",disabled:r,variant:"contained",sx:{marginTop:1,width:"100%"},children:"Continue"})]}),jsx(on,{component:"button",marginTop:1,onClick:t,children:"Go Back"})]})};var wp=({callbackUrl:t,onResetPassword:e,renderLogo:r,title:n,token:o})=>{let[a,i]=useState(!1),[s,u]=useState(""),p=useFormik({initialValues:{newPassword:"",confirmPassword:""},validationSchema:Et.object({newPassword:Et.string().required("New password is a required field"),confirmPassword:Et.string().oneOf([Et.ref("newPassword"),void 0],"Passwords must match").required("Confirm password is a required field")}),onSubmit:async({newPassword:l})=>{i(!0),u("");try{await e(l,o,t);}catch(f){f instanceof Error&&u(f.message);}finally{i(!1);}},validateOnBlur:!0});return jsxs(Pt,{renderLogo:r,title:n,children:[s?jsx(zi,{sx:{my:1},severity:"error",children:s}):null,jsxs("form",{onSubmit:p.handleSubmit,children:[jsx($,{id:"newPassword",placeholder:"New password",size:"medium",value:p.values.newPassword,hasError:!!p.errors.newPassword,description:p.touched.newPassword?p.errors.newPassword:void 0,onBlur:p.handleBlur,onChange:l=>p.setFieldValue("newPassword",l.target.value),type:"password"}),jsx($,{id:"confirmPassword",placeholder:"Confirm password",size:"medium",value:p.values.confirmPassword,hasError:!!p.errors.confirmPassword,description:p.touched.confirmPassword?p.errors.confirmPassword:void 0,onBlur:p.handleBlur,onChange:l=>p.setFieldValue("confirmPassword",l.target.value),type:"password"}),jsx(Mi,{type:"submit",disabled:a,variant:"contained",sx:{marginTop:3,width:"100%"},children:"Reset Password"})]})]})};var Cp=({email:t,onGoBack:e,onResend:r})=>{let[n,o]=useState(!1),[a,i]=useState(""),[s,u]=useState("");return jsxs(Pt,{renderLogo:jsxs(Fragment,{children:[jsx(nr,{sx:{border:3,borderColor:"success.main",borderRadius:50,width:60,height:60,display:"grid",placeItems:"center"},children:jsx(dp,{color:"success",fontSize:"large"})}),jsx(Me,{fontSize:"18px",fontWeight:700,color:"text.primary",children:"Verify your email address"})]}),children:[a?jsx(zi,{sx:{my:1},severity:"error",children:a}):null,s?jsx(zi,{sx:{my:1},severity:"success",children:s}):null,jsxs(nr,{display:"flex",flexDirection:"column",gap:3,children:[jsxs(nr,{children:[jsx(Me,{children:"You're almost there! We've sent an email to "}),jsx(Me,{fontWeight:"fontWeightMedium",component:"span",children:t})]}),jsx(Me,{children:"Please click on the link in that email to complete your signup."}),jsx(Me,{children:"Can't find the email?"})]}),jsx(Mi,{onClick:async()=>{o(!0);try{await r(t),u("Email sent successfully.");}catch(l){l instanceof Error&&i(l.message);}finally{o(!1);}},color:"success",variant:"outlined",sx:{marginTop:1},disabled:n,children:"Resend email"}),jsx(on,{component:"button",marginTop:1,onClick:e,children:"Go Back"})]})};var gr={fontFamily:["Inter","sans-serif"].join(",")},yr={MuiButton:{defaultProps:{disableElevation:!0,disableRipple:!0,sx:{textTransform:"none"}}},MuiLink:{defaultProps:{fontWeight:500}},MuiFormHelperText:{defaultProps:{sx:{m:0,fontWeight:400,color:g[500]}}},MuiTooltip:{styleOverrides:{tooltip:{backgroundColor:"black"}}}},_r={borderRadius:8},Ai={main:cr[500],contrastText:Mt},Bi={main:"rgba(239, 65, 70, 1)",contrastText:Mt},Pp=(t,e)=>hr({typography:t?{fontFamily:t}:gr,components:yr,shape:_r,breakpoints:e,palette:{mode:"dark",success:Ai,error:Bi,background:{default:g[850],paper:g[900]},primary:{main:"#F80061",dark:pt[800],light:"#FFE7EB",contrastText:Mt},secondary:{main:"#9757D7",dark:"#763FB8",light:"#B87FE7",contrastText:Mt},divider:g[800],text:{primary:g[200],secondary:g[400]}}}),kp=(t,e)=>hr({typography:t?{fontFamily:t}:gr,components:yr,shape:_r,breakpoints:e,palette:{mode:"light",success:Ai,error:Bi,background:{default:g[50],paper:Mt},primary:{main:"#F80061",dark:pt[800],light:"#FFE7EB",contrastText:Mt},secondary:{main:"#9757D7",dark:"#763FB8",light:"#B87FE7",contrastText:Mt},divider:g[200],text:{primary:g[900],secondary:g[700]}}}),fg=(t,e,r)=>t==="dark"?Pp(e,r):kp(e,r),Ri=hr({typography:gr,components:yr,shape:_r,palette:{primary:{main:g[900]}}}),Oi=hr({typography:gr,components:yr,shape:_r,palette:{primary:{main:g[200]}}});var ln=({sx:t,...e})=>{let n=Du().palette.mode==="dark"?Ri:Oi;return jsx(zp,{theme:n,children:jsx(Mi,{...e,disableElevation:!0,disableRipple:!0,sx:{...t,textTransform:"none"}})})};var cn=({children:t,...e})=>jsx("span",{children:jsx(Mi,{sx:{textTransform:"none",color:r=>r.palette.mode==="dark"?"text.primary":r.palette.primary.main,background:r=>r.palette.mode==="dark"?g[700]:r.palette.primary.light,"&:hover":{background:r=>r.palette.mode==="dark"?g[700]:r.palette.primary.light}},...e,children:t})});function ct({children:t,...e}){let r=useTheme();return jsx("span",{style:{color:r.palette.text.primary},children:jsx(Mi,{color:r.palette.mode==="dark"?"inherit":"primary",...e,children:t})})}var V=()=>Du().palette.mode==="dark";var fn=["#fb923c","#facc15","#34d399","#38bdf8","#818cf8","#c084fc","#f472b6","#0ea5e9"],$i=["#ea580c","#ca8a04","#059669","#0284c7","#4f46e5","#9333ea","#db2777","#2563eb"],Lp=t=>t.split("").reduce((r,n)=>r=n.charCodeAt(0)+(r<<6)+(r<<16)-r,0),vr=t=>{let r=V()?fn:$i;return t&&(r===fn?r=$i:r=fn),r},Ni=t=>{let e=vr();return useCallback((r,n,o)=>{if(o)return "error.main";if(r===t)return "primary.main";if(n)return "text.primary";let a=Math.abs(Lp(r))%e.length;return e[a]},[t])};var mn=({onError:t,onResolved:e,options:r,spec:n})=>{let o=useCallback((l,f)=>{if(f.length>0){t&&t(f[0].errors[0].message);return}if(l.length)return e(l)},[n]),a={},i=n.accept;Array.isArray(i)?i.forEach(l=>{typeof l=="string"&&(a[l]=[]);}):typeof i=="object"&&(a=i);let{getRootProps:s,getInputProps:u,isDragActive:p}=useDropzone({onDrop:o,maxFiles:n.max_files||void 0,accept:a,maxSize:(n.max_size_mb||2)*1e6,...r});return {getInputProps:u,getRootProps:s,isDragActive:p}};var qp=(t,...e)=>{let r={...t};for(let n of e)delete r[n];return r},Pe=qp;var dn=({description:t,hasError:e,id:r,label:n,tooltip:o,setField:a,...i})=>{let s=u=>{let p=parseFloat(u.target.value),{min:l,max:f,onChange:c}=i;f&&p>f?a&&a(r,f):l&&p<l?a&&a(r,l):c&&c(u,p,0);};return jsx(Y,{description:t,hasError:e,id:r,label:n,tooltip:o,notificationsProps:{count:i.value?.toString()||"0",inputProps:{id:r,max:i.max,min:i.min,step:i.step||1,onChange:s}},children:jsx(Vp,{...i,id:r,name:r})})},Vp=pa(Wp)(({theme:t})=>{let e=t.palette.mode==="light";return {width:"calc(100% - 18px)",marginLeft:"8px",color:g[e?300:850],height:3,"& .MuiSlider-track":{border:"none",color:g[500]},"& .MuiSlider-thumb":{height:15,width:15,backgroundColor:e?g[600]:"white",border:`4px solid ${e?g[300]:g[800]}`,"&:focus, &:hover, &.Mui-active, &.Mui-focusVisible":{boxShadow:"inherit"},"&:before":{display:"none"}},"& .MuiSlider-valueLabel":{lineHeight:1.2,fontSize:12,background:"unset",padding:0,width:32,height:32,borderRadius:"50% 50% 50% 0",backgroundColor:"#52af77",transformOrigin:"bottom left",transform:"translate(50%, -100%) rotate(-45deg) scale(0)","&:before":{display:"none"},"&.MuiSlider-valueLabelOpen":{transform:"translate(50%, -100%) rotate(-45deg) scale(1)"},"& > *":{transform:"rotate(45deg)"}}}});var gn=t=>{let{checked:e,description:r,disabled:n,hasError:o,id:a,inputProps:i,label:s,onChange:u,tooltip:p}=t;return jsx(Y,{description:r,hasError:o,id:a,label:s,tooltip:p,children:jsx(Gp,{name:a,disabled:n,edge:"end",onChange:u,checked:e,inputProps:i})})},Gp=pa(t=>jsx(Up,{focusVisibleClassName:".Mui-focusVisible",disableRipple:!0,...t}))(({theme:t})=>{let e=t.palette.mode==="dark";return {width:40,height:24,padding:0,"& .MuiSwitch-switchBase":{margin:0,padding:"4px",transitionDuration:"300ms","&.Mui-checked":{transform:"translateX(16px)",color:"#fff","& + .MuiSwitch-track":{backgroundColor:cr[500],opacity:1,border:0},"&.Mui-disabled + .MuiSwitch-track":{opacity:.5}},"&.Mui-disabled .MuiSwitch-thumb":{color:e?t.palette.grey[600]:t.palette.grey[100]},"&.Mui-disabled + .MuiSwitch-track":{opacity:e?.3:.7}},"& .MuiSwitch-thumb":{boxSizing:"border-box",width:16,height:16,boxShadow:"unset"},"& .MuiSwitch-track":{borderRadius:26/2,backgroundColor:t.palette.grey[400],opacity:1,transition:t.transitions.create(["background-color"],{duration:500})}}});var yn=({description:t,hasError:e,id:r,label:n,size:o="small",tooltip:a,setField:i,...s})=>jsx(Y,{description:t,hasError:e,id:r,label:n,tooltip:a,children:jsx(MuiChipsInput,{...s,sx:{my:.5},size:o,onChange:u=>i?.(r,u,!1),inputProps:{id:r,name:r}})});var xr=({item:t,value:e,selected:r,isDarkMode:n,icon:o,...a})=>createElement(Jp,{...a,key:e,sx:{display:"flex",justifyContent:"space-between",fontWeight:500,fontSize:"14px",color:n&&g[400]||(r?pt[500]:g[700]),"&:hover":{backgroundColor:n?g[800]:pt[50],color:n?g[400]:pt[500],"& .notification-count":{backgroundColor:n?g[850]:pt[100],color:n?g[400]:pt[500]}}}},jsxs(Cr,{direction:"row",alignItems:"center",spacing:1,children:[t.icon?t.icon:null,jsx("span",{children:t.value})]}),t.notificationCount?jsx(be,{count:t.notificationCount}):null);var j=({children:t,description:e,disabled:r=!1,hasError:n,id:o,items:a,label:i,name:s,onChange:u,size:p="small",tooltip:l,value:f,placeholder:c="Select",renderLabel:d,onClose:m,sx:h,iconSx:_,...v})=>{let I=V();return jsx(Y,{id:o,hasError:n,description:e,label:i,tooltip:l,sx:h,children:jsx(el,{...v,size:p,onClose:m,labelId:o,value:f?.toString(),onChange:u,disabled:r,displayEmpty:!0,renderValue:()=>{let x=a?.find(P=>P.value===f);return !f||f===""?c:d&&d()||jsxs(Stack,{direction:"row",alignItems:"center",spacing:1,children:[x?.icon,jsx("span",{children:x?.label})]})},sx:{backgroundColor:x=>x.palette.background.paper,borderRadius:1,"&.MuiOutlinedInput-root":{"& fieldset":{border:x=>`1px solid ${x.palette.divider}`}}},inputProps:{id:o,name:s||o,sx:{color:"text.primary",fontSize:"14px",fontWeight:400}},MenuProps:{PaperProps:{sx:{border:x=>`1px solid ${x.palette.divider}`,boxShadow:x=>x.palette.mode==="light"?"0px 2px 4px 0px #0000000D":"0px 10px 10px 0px #0000000D","&& .Mui-selected, .Mui-selected.Mui-selected:hover":{backgroundColor:I?g[800]:pt[50]}}},MenuListProps:{sx:{backgroundColor:I?g[900]:""}}},IconComponent:x=>jsx(Qp,{...x,fontSize:"16px",sx:{px:"9px",color:r?"":`${I?g[300]:g[600]} !important`,..._}}),children:t||a?.map(x=>jsx(xr,{isDarkMode:I,item:x,selected:x.value===f,value:x.value},x.value))})})};var _n=({element:t})=>{switch(t?.type){case"select":return jsx(j,{...Pe(t,"setField"),value:t.value??""});case"slider":return jsx(dn,{...t,value:t.value??0});case"tags":return jsx(yn,{...t,value:t.value??[]});case"switch":return jsx(gn,{...Pe(t,"setField"),checked:!!t.value,inputProps:{id:t.id,name:t.id}});case"textinput":return jsx($,{...Pe(t,"setField"),value:t.value??""});case"numberinput":return jsx($,{...Pe(t,"setField"),type:"number",value:t.value?.toString()??"0"});default:return jsx(Fragment,{})}};var il=({items:t,value:e,...r})=>{let n=V(),o=i=>{let s=jsx(ol,{children:i.header}),u=i.items.map(p=>jsx(xr,{isDarkMode:n,item:p,selected:p.value===e,value:p.value}));return [s,...u]};return jsx(j,{value:e,renderLabel:()=>{let i;for(let s of t){let u=s.items.find(p=>p.value===e);if(u){i=u.label;break}}return i||""},...r,children:t.map(o)})};var xn=t=>{let{id:e,items:r,label:n,onChange:o,value:a,disabled:i}=t,s=V();return jsx(Y,{id:e,label:n,sx:{width:"fit-content"},children:jsx(nr,{sx:{border:u=>`1px solid ${u.palette.divider}`,backgroundColor:u=>u.palette.background.paper,borderRadius:1},children:jsx(ul,{value:r.findIndex(u=>u===a),onChange:(u,p)=>o(r[p]),sx:{minHeight:"39px !important","& .MuiButtonBase-root":{textTransform:"none",zIndex:1,color:g[s?600:500],fontSize:"14px",fontWeight:500,padding:0,minHeight:"39px !important",width:"125px"},"& .Mui-selected":{color:"white !important"},"& .MuiTabs-indicator":{background:u=>s?u.palette.divider:u.palette.primary.main,height:"100%",borderRadius:"5px"}},children:r.map(u=>jsx(sl,{disabled:i,className:`tab-${u}`,disableRipple:!0,label:u},`tab-${u}`))})})})};var Te=({element:t})=>{let e=Du();return t.url?jsxs(nr,{className:`${t.display}-audio`,children:[jsx(nr,{sx:{fontSize:"14px",lineHeight:1.72,color:e.palette.mode==="dark"?g[300]:g[700],marginBottom:e.spacing(.5)},children:t.name}),jsx("audio",{controls:!0,src:t.url})]}):null};var wn=({element:t,author:e,bgColor:r})=>{let n,o={width:26,height:26,fontSize:"0.75rem",mt:"-2px",bgcolor:t?.url?"transparent":r};return t?.url?n=jsx(Ki,{sx:o,src:t?.url}):n=jsx(Ki,{sx:o,children:e[0]?.toUpperCase()}),jsx("span",{className:"message-avatar",children:n})};var bn=({name:t,mime:e,children:r})=>{let n=e?e.split("/").pop():"txt";return jsxs(nr,{position:"relative",sx:o=>({height:50,[o.breakpoints.down("sm")]:{height:36}}),children:[r,jsxs(Cr,{sx:o=>({height:"100%",flexDirection:"row",alignItems:"center",gap:1.2,borderRadius:1,px:1.2,border:a=>`1px solid ${a.palette.primary.main}`,color:a=>a.palette.mode==="light"?a.palette.primary.main:a.palette.text.primary,background:a=>a.palette.mode==="light"?a.palette.primary.light:a.palette.primary.dark,width:160,[o.breakpoints.down("sm")]:{width:"fit-content",maxWidth:120}}),children:[jsx(nr,{sx:o=>({width:"2rem",[o.breakpoints.down("sm")]:{width:"1.25rem"}}),children:jsx(FileIcon,{...defaultStyles[n],extension:n})}),jsx(Me,{sx:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontWeight:500,fontSize:"0.8rem",width:"70%"},children:t})]})]})};var ze=({element:t})=>t.url?jsx(on,{className:`${t.display}-file`,download:t.name,href:t.url,target:"_blank",sx:{textDecoration:"none"},children:jsx(bn,{name:t.name,mime:t.mime})}):null;var En=({children:t})=>jsx(nr,{sx:{p:1,boxSizing:"border-box",bgcolor:e=>e.palette.mode==="light"?g[200]:g[900],borderRadius:"4px",display:"flex"},children:t});var xl=(t,e)=>{let r=document.createElement("a");r.href=e,r.target="_blank",r.download=t,r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r);},Ae=({element:t})=>{let[e,r]=useState(!0);return t.url?jsxs(En,{children:[e&&jsx(vl,{variant:"rectangular",width:"100%",height:200}),jsx("img",{className:`${t.display}-image`,src:t.url,onLoad:()=>r(!1),onClick:()=>{if(t.display==="inline"){let n=`${t.name}.png`;xl(n,t.url);}},style:{objectFit:"cover",maxWidth:"100%",margin:"auto",height:"auto",display:"block",cursor:t.display==="inline"?"pointer":"default"},alt:t.name,loading:"lazy"})]}):null};var Be=({element:t})=>{if(!t.url)return null;let e=t.page?`${t.url}#page=${t.page}`:t.url;return jsx("iframe",{className:`${t.display}-pdf`,src:e,style:{border:"none"},width:"100%",height:"100%"})};var Kt=class extends Component{constructor(){super(...arguments);this.state={hasError:!1,error:void 0};}static getDerivedStateFromError(r){return {hasError:!0,error:r.message}}componentDidCatch(r,n){console.error("Uncaught error:",r,n);}render(){if(this.state.hasError){let r=this.props.prefix?`${this.props.prefix}: ${this.state.error}`:this.state.error;return jsx(nr,{flexGrow:1,children:jsx(zi,{severity:"error",children:r})})}return this.props.children}};var Ml=async t=>{let e=await fetch(t);if(!e.ok)throw new Error("Network response was not ok");let r=e.headers.get("content-type");return r&&r.includes("application/json")?e.json():e.text()},wr=t=>Cl(t,Ml);var Tl=lazy(()=>import('react-plotly.js')),zl=({element:t})=>{let{data:e,error:r,isLoading:n}=wr(t.url||null);if(n)return jsx("div",{children:"Loading..."});if(r)return jsx("div",{children:"An error occured"});let o;if(e)o=e;else return null;return jsx(Suspense,{fallback:jsx("div",{children:"Loading..."}),children:jsx(Tl,{className:`${t.display}-plotly`,data:o.data,layout:o.layout,frames:o.frames,config:o.config,style:{width:"100%",height:"100%"},useResizeHandler:!0})})},Re=t=>jsx(Kt,{prefix:"Failed to load chart.",children:jsx(zl,{...t})});var Xt=({value:t,edge:e})=>{let[r,n]=useState(!1),[o,a]=useCopyToClipboard();return jsx(Jn,{title:r?"Copied to clipboard!":"Copy",onClose:()=>{n(!1);},sx:{zIndex:2},children:jsx(Xn,{color:"inherit",edge:e,onClick:()=>{a(t).then(()=>{n(!0);}).catch(u=>console.log("An error occurred while copying: ",u));},children:jsx(Rl,{sx:{height:16,width:16}})})})};var Wl=({language:t,children:e})=>{let r=useRef(null);return useEffect(()=>{r.current&&(r.current.getAttribute("data-highlighted")==="yes"||Dl.highlightElement(r.current));},[]),jsx("pre",{style:{margin:0},children:jsx("code",{ref:r,style:{borderBottomLeftRadius:"4px",borderBottomRightRadius:"4px",fontFamily:"monospace",fontSize:"14px"},className:`language-${t}`,children:e})})},Mn=({children:t,...e})=>{let r=V(),n=e.node?.children?.[0],o=n?.properties?.className?.[0],a=/language-(\w+)/.exec(o||""),i=n?.children?.[0]?.value,s=a&&i,u=s?jsx(Wl,{language:a[1],children:i}):null,p=s?null:jsx(nr,{sx:{background:r?g[900]:g[200],borderRadius:"4px",padding:l=>l.spacing(1),paddingRight:"2.5em",minHeight:"20px",overflowX:"auto"},children:jsx("code",{...e,style:{whiteSpace:"pre-wrap"},children:t})});return jsxs(nr,{sx:{position:"relative"},children:[jsxs(Cr,{px:2,py:.5,direction:"row",sx:{justifyContent:"space-between",alignItems:"center",borderTopLeftRadius:"4px",borderTopRightRadius:"4px",background:r?g[900]:g[200]},children:[jsx(Me,{variant:"caption",children:a?.[1]||"Raw code"}),jsx(Xt,{edge:"end",value:i})]}),u,p]})};var Pn={avatars:[],defaultCollapseContent:!1,expandAll:!1,hideCot:!1,highlightedMessage:null,loading:!1,onElementRefClick:void 0,onFeedbackUpdated:void 0,onPlaygroundButtonClick:void 0,showFeedbackButtons:!0,onError:()=>{},uiName:""},B=createContext(Pn);var ea=({element:t})=>{let{onElementRefClick:e}=useContext(B);return t.display==="inline"?jsx("span",{style:{fontWeight:700},children:t.name}):jsx(on,{role:"link",className:"element-link",sx:{cursor:"pointer"},onClick:()=>e&&e(t),children:t.name})};var na=({children:t,...e})=>{let r=V();return jsx(nr,{sx:{display:"inline",position:"relative"},children:jsx("code",{...e,style:{background:r?g[900]:g[200],borderRadius:"4px",padding:"0.2em 0.4em",overflowX:"auto"},children:t})})};function oe({refElements:t,allowHtml:e,latex:r,children:n}){let o=useMemo(()=>{let i=[];return e&&(i=[Jl,...i]),r&&(i=[Xl,...i]),i},[e,r]),a=useMemo(()=>{let i=[Yl];return r&&(i=[jl,...i]),i},[r]);return jsx(Gl,{remarkPlugins:a,rehypePlugins:o,className:"markdown-body",components:{a({children:i,...s}){let u=i,p=t?.find(l=>l.name===u);return p?jsx(ea,{element:p}):jsx(on,{...s,target:"_blank",children:i})},code({...i}){return jsx(na,{...i})},pre({...i}){return jsx(Mn,{...i})},table({children:i,...s}){return jsx(rc,{sx:{width:"fit-content",minWidth:"300px"},elevation:0,component:Ql,children:jsx(tc,{...s,children:i})})},thead({children:i,...s}){return jsx(nc,{...s,children:i})},tr({children:i,...s}){return jsx(oc,{...s,children:i})},th({children:i,...s}){return jsx(ia,{...s,align:"right",sx:{padding:1},children:i})},td({children:i,...s}){return jsx(ia,{...s,align:"right",sx:{padding:1},children:i})},tbody({children:i,...s}){return jsx(ec,{...s,children:i})}},children:n})}var Oe=({element:t})=>{let{data:e,error:r,isLoading:n}=wr(t.url||null),o;return n?o="Loading...":r?o="An error occured":e&&(console.log("data"+e),o=e.content),t.language&&o&&!n&&!r&&(o=`\`\`\`${t.language}
${o}
\`\`\``),jsx(nr,{sx:{fontFamily:a=>a.typography.fontFamily},children:jsx(oe,{children:o})})};var Fe=({element:t})=>t.url?jsx("video",{className:`${t.display}-video`,width:"100%",controls:!0,src:t.url}):null;var De=({element:t})=>{switch(t?.type){case"file":return jsx(ze,{element:t});case"image":return jsx(Ae,{element:t});case"text":return jsx(Oe,{element:t});case"pdf":return jsx(Be,{element:t});case"audio":return jsx(Te,{element:t});case"video":return jsx(Fe,{element:t});case"plotly":return jsx(Re,{element:t});default:return null}};var kn=400,gc=forwardRef(function({...e},r){return delete e.handleAxis,jsx(nr,{sx:{boxSizing:"content-box",width:"4px",height:"24px",position:"absolute",top:"50%",marginTop:"-12px",left:0,cursor:"ew-resize",padding:"10px 5px"},ref:r,...e,children:jsx(nr,{sx:{boxSizing:"content-box",width:"100%",height:"100%",backgroundColor:"grey.300",borderRadius:"4px"}})})}),yc=({children:t,element:e,isOpen:r,onClose:n})=>{let[o,a]=useState(!1),[i,s]=useState(kn),u=(f,c)=>s(c.size.width),{width:p}=useWindowSize(),l=hc(f=>f.breakpoints.down("sm"));return i<kn&&l&&s(kn),jsxs(Fragment,{children:[jsx(_c,{open:r,width:i,children:t}),jsx(Resizable,{width:i,height:0,onResize:u,onResizeStart:()=>a(!0),onResizeStop:()=>a(!1),resizeHandles:["w"],handle:l?jsx(Fragment,{}):jsx(gc,{}),axis:"x",minConstraints:[100,0],maxConstraints:[p/2,0],children:jsxs(vc,{anchor:"right",isSmallScreen:l,open:r,variant:l?"temporary":"persistent",width:i,children:[jsxs(Cr,{direction:"row",alignItems:"center",children:[jsx(Me,{noWrap:!0,fontSize:"20px",fontWeight:500,id:"side-view-title",children:e?.name}),jsx(Xn,{edge:"end",sx:{ml:"auto"},onClick:n,children:jsx(lc,{})})]}),jsx(nr,{mt:"1.5rem",id:"side-view-content",sx:{height:"100%",pointerEvents:o?"none":"auto"},children:jsx(De,{element:e})})]})})]})},_c=pa(nr,{shouldForwardProp:t=>t!=="open"})(({theme:t,open:e})=>({width:"100%",display:"flex",flexDirection:"column",boxSizing:"border-box",transition:t.transitions.create("margin",{easing:t.transitions.easing[e?"easeOut":"sharp"],duration:t.transitions.duration[e?"enteringScreen":"leavingScreen"]})})),vc=pa(cc,{shouldForwardProp:t=>t!=="isSmallScreen"})(({theme:t,open:e,width:r,isSmallScreen:n})=>({width:r,flexShrink:0,display:e?"flex":"none","& .MuiDrawer-paper":{position:"inherit",width:r,maxWidth:n?"80%":"100%",backgroundColor:t.palette.background.paper,borderLeft:`1px solid ${t.palette.divider}`,flexDirection:"column",borderRadius:0,color:t.palette.text.primary,whiteSpace:"nowrap",boxSizing:"border-box",padding:"1.5rem",paddingTop:".5rem",overflowX:"hidden"}}));var Ec=({element:t,onGoBack:e})=>jsxs(nr,{display:"flex",flexDirection:"column",flexGrow:1,p:3,gap:2,boxSizing:"border-box",mx:"auto",sx:{width:"100%",maxWidth:"60rem",color:"text.primary"},id:"element-view",children:[jsxs(Cr,{direction:"row",gap:1,children:[e?jsx(Xn,{edge:"start",onClick:e,children:jsx(xc,{})}):null,jsx(Me,{fontWeight:700,fontSize:"25px",children:t.name})]}),jsx(De,{element:t})]});var An=({items:t})=>jsx(Cr,{spacing:1,children:t.map((e,r)=>jsx(nr,{pt:.5,children:jsx(Te,{element:e})},r))});var Rn=({items:t})=>jsx(Cr,{spacing:1,direction:"row",children:t.map((e,r)=>jsx("div",{children:jsx(ze,{element:e})},r))});var ca=t=>{switch(t.size){case"small":return 1;case"medium":return 2;case"large":return 4;default:return 2}},Er=({elements:t,renderElement:e})=>jsx(kc,{sx:{margin:0,transform:"translateZ(0)",width:"100%",maxWidth:600},variant:"quilted",cols:4,gap:8,children:t.map((r,n)=>{let o=ca(r),a=ca(r);return jsx(Tc,{cols:o,rows:a,children:jsx(e,{element:r})},n)})});var Fn=({items:t})=>jsx(Er,{elements:t,renderElement:e=>jsx(Ae,{element:e.element})});var Ln=({items:t})=>jsx(Cr,{spacing:1,children:t.map((e,r)=>jsx("div",{style:{maxWidth:"600px",height:"400px"},children:jsx(Be,{element:e})},r))});var Nn=({items:t})=>jsx(Cr,{spacing:1,children:t.map((e,r)=>jsx("div",{style:{maxWidth:"600px",height:"400px"},children:jsx(Re,{element:e})},r))});var Wn=({items:t})=>jsx(Cr,{spacing:1,children:t.map((e,r)=>jsxs(zi,{color:"info",icon:!1,children:[jsx(Rc,{children:e.name}),jsx(Oe,{element:e})]},r))});var Hn=({items:t})=>jsx(Er,{elements:t,renderElement:e=>jsx(Fe,{element:e.element})});var Vn=({elements:t})=>{if(!t.length)return null;let e=t.reduce((r,n)=>(r[n.type]||(r[n.type]=[]),r[n.type].push(n),r),{});return jsxs(Cr,{gap:1,mt:1,children:[e.image?.length?jsx(Fn,{items:e.image}):null,e.text?.length?jsx(Wn,{items:e.text}):null,e.pdf?.length?jsx(Ln,{items:e.pdf}):null,e.audio?.length?jsx(An,{items:e.audio}):null,e.video?.length?jsx(Hn,{items:e.video}):null,e.file?.length?jsx(Rn,{items:e.file}):null,e.plotly?.length?jsx(Nn,{items:e.plotly}):null]})};var Hc=({askUser:t,uploadFile:e,onError:r})=>{let[n,o]=useState([]),a=n.some(f=>!f.uploaded),i=n.reduce((f,c)=>f+c.progress/n.length,0),s=f=>{if(a)return;let c=[],d=f.map((m,h)=>{let{xhr:_,promise:v}=e(m,I=>{o(x=>x.map((P,b)=>b===h?{...P,progress:I}:P));});return c.push(v),{progress:0,uploaded:!1,cancel:()=>_.abort()}});Promise.all(c).then(m=>t.callback(m)).catch(m=>{r(`Failed to upload: ${m.message}`),o(h=>(h.forEach(_=>_.cancel()),[]));}),o(d);},u=mn({spec:t.spec,onResolved:s,onError:f=>r(f)});if(!u)return null;let{getRootProps:p,getInputProps:l}=u;return jsxs(Cr,{sx:{width:"100%",borderRadius:1,backgroundColor:f=>f.palette.background.paper,boxSizing:"border-box",mt:1},direction:"row",alignItems:"center",padding:2,...p({className:"dropzone"}),children:[jsx("input",{id:"ask-button-input",...l()}),jsxs(Cr,{children:[jsx(Me,{color:"text.primary",children:"Drag and drop files here"}),jsxs(Me,{variant:"caption",color:"text.secondary",children:["Limit ",t.spec.max_size_mb,"mb."]})]}),jsx(Mi,{id:a?"ask-upload-button-loading":"ask-upload-button",disabled:a,sx:{ml:"auto !important",textTransform:"capitalize"},variant:"contained",children:a?jsx(Wc,{variant:"determinate",value:i,size:20}):"Browse Files"})]})},ga=({onError:t})=>{let e=useContext(B);return e.askUser?.spec.type!=="file"||!e?.uploadFile?null:jsx(Hc,{onError:t,uploadFile:e.uploadFile,askUser:e.askUser})};var ya=({timestamp:t})=>{if(!t)return null;let e={hour:"2-digit",minute:"2-digit"};typeof t=="string"&&!t.endsWith("Z")&&(t=t+"Z");let r=new Date(t).toLocaleTimeString(void 0,e);return jsx(Me,{sx:{mt:"1px"},color:g[500],fontSize:"12px",lineHeight:"unset",children:r})};var Pr=26,va=({message:t,show:e,children:r})=>{let n=useContext(B),o=Ni(n.uiName),a=t.type==="user_message",i=a?"You":t.name,s=n.avatars.find(l=>l.name===i),u=e?jsxs(Cr,{alignItems:"center",gap:1,children:[jsx(wn,{element:s,author:i,bgColor:o(i,a,t.isError)}),(!!t.indent||t.parentId)&&jsx(nr,{width:"2px",height:"100%",borderRadius:"13px",bgcolor:o(i,a)})]}):jsx(nr,{width:Pr}),p=jsxs(Cr,{direction:"row",gap:1,alignItems:"center",children:[e?jsx(Me,{noWrap:!0,sx:{fontSize:"1rem",fontWeight:600,lineHeight:"unset"},children:i}):null,jsx(ya,{timestamp:t.createdAt})]});return jsxs(Cr,{direction:"row",gap:1.5,width:"100%",children:[u,jsxs(Cr,{gap:1,width:`calc(100% - ${Pr+12}px)`,children:[p,r]})]})};var xa=({message:t,opened:e,onClick:r,loading:n})=>{let o=useContext(B),a=t.steps?.length,i=!!a&&!o.hideCot,s=i?t.steps[a-1]:void 0,u=s?s.name:void 0,p=t.output,l=n&&(!p||o.hideCot&&!t.streaming);if(!(u||l))return null;let c=a?t.steps.filter(h=>!!h.output||h.steps?.length).length:0,d=n?u?`Using ${u}`:"Running":`Took ${c} step${c<=1?"":"s"}`,m="";return u&&(m=u.trim().toLowerCase().replaceAll(" ","-")),n?m+="-loading":m+="-done",jsx(ln,{size:"small",id:m,sx:{marginTop:1},color:"primary",startIcon:n?jsx(Wc,{color:"inherit",size:16}):void 0,variant:"contained",endIcon:i&&u?e?jsx(Jc,{}):jsx(Yc,{}):void 0,onClick:u?r:void 0,children:d})};var Tr=({action:t,margin:e,onClick:r})=>{let{askUser:n,loading:o}=useContext(B),a=n?.spec.type==="action",i=a&&!n?.spec.keys?.includes(t.id),s=()=>{a?n?.callback(t):(t.onClick(),r?.());};return jsx(Jn,{title:t.description,placement:"top",children:jsx("span",{children:jsx(Mi,{size:"small",variant:"outlined",sx:{textTransform:"none",margin:e},id:t.id,onClick:s,disabled:o||i,children:t.label||t.name})})})};var Sa="16px",wa=({actions:t})=>{let[e,r]=useState(null);return jsxs(Fragment,{children:[jsx(Jn,{title:"More Actions",children:jsx(Xn,{id:"actions-drawer-button",onClick:n=>r(n.currentTarget),children:jsx(rf,{sx:{width:Sa,height:Sa}})})}),jsx(of,{id:"actions-menu",anchorEl:e,open:!!e,onClose:()=>r(null),sx:{marginTop:1},slotProps:{paper:{sx:{boxShadow:n=>n.palette.mode==="light"?"0px 2px 4px 0px #0000000D":"0px 10px 10px 0px #0000000D"}}},children:jsx(Cr,{direction:"column",paddingX:2,gap:1,children:t.map(n=>jsx(Tr,{onClick:()=>r(null),action:n,margin:0},n.id))})})]})};var Ia=({message:t,actions:e})=>{let r=e.filter(i=>i.forId?i.forId===t.id:!0),n=r.filter(i=>!i.collapsed),o=r.filter(i=>i.collapsed);return n.length||o.length?jsx(Cr,{direction:"row",spacing:1,alignItems:"start",justifyContent:"space-between",width:"100%",children:jsxs(nr,{id:"actions-list",children:[n.map(i=>jsx(Tr,{action:i,margin:"2px 8px 6px 0"},i.id)),o.length?jsx(wa,{actions:o}):null]})}):null};var vf=({actions:t,content:e,title:r,...n})=>jsx(df,{...n,fullWidth:!0,sx:{border:o=>o.palette.mode==="dark"?`1px solid ${_f[800]}`:null,borderRadius:1},children:jsxs(nr,{bgcolor:"background.paper",children:[r?jsx(yf,{children:jsx(Fragment,{children:r})}):null,e?jsx(gf,{children:e}):null,t?jsx(hf,{sx:{padding:o=>o.spacing(0,3,2)},children:jsx(Fragment,{children:t})}):null]})}),Ea=vf;var Ma="16px",ka=({message:t})=>{let{onFeedbackUpdated:e}=useContext(B),[r,n]=useState(),[o,a]=useState(),[i,s]=useState(t.feedback?.value||0),[u,p]=useState(t.feedback?.comment),l=i===-1?bf:Ef,f=i===1?Cf:Mf,c=(_,v)=>{e&&e(t,()=>{s(_),p(v);},{...t.feedback||{strategy:"BINARY"},forId:t.id,value:_,comment:v});},d=_=>{i===_?c(0):n(_);},m=!!t.streaming,h=useMemo(()=>{let _={width:Ma,height:Ma},v=[()=>jsx(Jn,{title:"Helpful",children:jsx("span",{children:jsx(Xn,{color:"inherit",disabled:m,className:`positive-feedback-${i===1?"on":"off"}`,onClick:()=>{d(1);},children:jsx(f,{sx:_})})})}),()=>jsx(Jn,{title:"Not helpful",children:jsx("span",{children:jsx(Xn,{color:"inherit",disabled:m,className:`negative-feedback-${i===-1?"on":"off"}`,onClick:()=>{d(-1);},children:jsx(l,{sx:_})})})})];return u&&v.push(()=>jsx(Jn,{title:"Feedback",children:jsx("span",{children:jsx(Xn,{color:"inherit",disabled:m,onClick:()=>{n(i),a(u);},className:"feedback-comment-edit",children:jsx(If,{sx:_})})})})),v},[i,u,m]);return jsxs(Fragment,{children:[jsx(Cr,{direction:"row",children:h.map((_,v)=>jsx(_,{},`feedback-button-${v}`))}),jsx(Ea,{maxWidth:"xs",onClose:()=>{n(void 0);},open:!!r,title:jsxs(Cr,{direction:"row",alignItems:"center",gap:2,children:[r===-1?jsx(l,{}):jsx(f,{}),"Provide additional feedback"]}),content:jsx($,{id:"feedbackDescription",value:o,multiline:!0,size:"medium",onChange:_=>{_.target.value===""?a(void 0):a(_.target.value);}}),actions:jsx(ct,{id:"feedbackSubmit",type:"submit",variant:"outlined",onClick:()=>{r!=null&&c(r,o),n(void 0),a(void 0);},autoFocus:!0,children:"Submit feedback"})})]})};var Ta=({step:t})=>{let{onPlaygroundButtonClick:e}=useContext(B);return jsx(Jn,{title:"Inspect in prompt playground",children:jsx(Xn,{color:"inherit",className:"playground-button",onClick:()=>{e&&e(t);},children:jsx(Tf,{sx:{width:"18px",height:"18px"}})})})};var za=({message:t})=>{let e=V(),{showFeedbackButtons:r}=useContext(B),n=!!t.generation,o=t.type==="user_message",a=t.waitForAnswer,i=!!t.output,s=i&&!o&&!a&&!t.disableFeedback,u=r&&!t.disableFeedback&&!o&&!a&&i;return s||n||u?jsxs(Cr,{sx:{marginLeft:"-8px !important"},alignItems:"center",direction:"row",color:e?g[400]:g[600],children:[s?jsx(Xt,{value:t.output}):null,u?jsx(ka,{message:t}):null,n?jsx(Ta,{step:t}):null]}):null};var Qn=({children:t,defaultExpandAll:e=!1})=>{let[r,n]=useToggle(e);return jsxs(nr,{children:[jsx($f,{in:r,collapsedSize:100,timeout:0,children:jsx(nr,{height:r?"auto":100,position:"relative",children:jsx(nr,{position:r?"relative":"absolute",top:0,left:0,right:0,bottom:0,children:t})})}),jsx(Cr,{direction:"row",justifyContent:"end",children:jsx(Jn,{title:r?"Collapse":"Expand",children:jsx(Xn,{onClick:n,children:r?jsx(Jc,{}):jsx(Yc,{})})})})]})};var Aa=(t,e)=>!e||!t?!1:e===t.toString(),Vf=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),to=({elements:t,content:e,id:r,language:n})=>{let o=t.map(p=>Vf(p.name));o.sort((p,l)=>l.length-p.length);let a=o.length?new RegExp(`(${o.join("|")})`,"g"):void 0,i=e?e.trim():"",s=t.filter(p=>Aa(r,p?.forId)&&p.display==="inline"),u=[];if(a&&(i=i.replaceAll(a,p=>{let l=t.find(d=>{let m=d.name===p,h=Aa(r,d?.forId);return m&&h}),f=!!l,c=l?.display==="inline";return f?c?(s.indexOf(l)===-1&&s.push(l),p):(u.push(l),`[${p}](${p.replaceAll(" ","_")})`):p})),n){let p=`\`\`\`${n}`;i.startsWith("```")||(i=`${p}
${i}
\`\`\``);}return {preparedContent:i,inlinedElements:s,refElements:u}};var Yf=25,jf=3e3,Ra=memo(({message:t,elements:e,preserveSize:r,allowHtml:n,latex:o})=>{let a="role"in t&&t.role==="user",i=0,s=0,{preparedContent:u,inlinedElements:p,refElements:l}=to({elements:e,id:t.id,content:t.output,language:t.language});i+=u.split(`
`).length,s+=u.length;let f=jsx(oe,{allowHtml:n,latex:o,refElements:l,children:u}),c;if(t.input&&t.showInput){let{preparedContent:_,refElements:v}=to({elements:e,id:t.id,content:t.input,language:typeof t.showInput=="string"?t.showInput:void 0});i+=_.split(`
`).length,s+=_.length,c=jsx(oe,{allowHtml:n,latex:o,refElements:v,children:_});}let d=jsxs(Me,{sx:{width:"100%",minHeight:"20px",fontSize:"1rem",lineHeight:"1.5rem",fontFamily:_=>_.typography.fontFamily,fontWeight:a?500:300},component:"div",children:[c,c&&f?jsx(Gf,{sx:{my:1}}):null,f]}),h=i>Yf||s>jf?jsx(Qn,{defaultExpandAll:r,children:d}):d;return jsx(Cr,{width:"100%",direction:"row",children:jsxs(nr,{width:"100%",sx:{minWidth:"100px"},children:[u?h:null,jsx(Vn,{elements:p})]})})});var La=memo(({message:t,elements:e,actions:r,indent:n,showAvatar:o,showBorder:a,isRunning:i,isLast:s})=>{let{expandAll:u,hideCot:p,highlightedMessage:l,defaultCollapseContent:f,allowHtml:c,latex:d,onError:m}=useContext(B),[h,_]=useState(u);if(useEffect(()=>{_(u);},[u]),p&&n)return null;let v=t.type==="user_message",I=t.waitForAnswer;return jsxs(nr,{sx:{color:"text.primary",backgroundColor:x=>v?"transparent":x.palette.mode==="dark"?x.palette.grey[800]:x.palette.grey[100]},className:"step",children:[jsx(nr,{sx:{boxSizing:"border-box",mx:"auto",maxWidth:"60rem",px:2,display:"flex",flexDirection:"column",position:"relative"},children:jsx(Cr,{id:`step-${t.id}`,direction:"row",ml:n?`${n*(Pr+12)}px`:0,sx:{py:2,borderBottom:x=>a?`1px solid ${x.palette.divider}`:"none",animation:t.id&&l===t.id?`3s ease-in-out 0.1s ${nm}`:"none",overflowX:"auto"},children:jsx(va,{message:t,show:o,children:jsxs(Cr,{alignItems:"flex-start",minWidth:150,children:[jsx(Ra,{elements:e,message:t,preserveSize:!!t.streaming||!f,allowHtml:c,latex:d}),jsx(xa,{message:t,opened:h,onClick:()=>_(!h),loading:i&&s}),!i&&s&&I&&jsx(ga,{onError:m}),r?.length?jsx(Ia,{message:t,actions:r}):null,jsx(za,{message:t})]})})})}),t.steps&&h&&jsx(Ar,{messages:t.steps,actions:r,elements:e,indent:n+1,isRunning:i})]})}),nm=keyframes`
  from {
    background-color: transparent;
  }
  25% {
    background-color: rgba(255, 173, 51, 0.5);
  }
  to {
    background-color: transparent;
  }
`;var Ar=memo(({messages:t,elements:e,actions:r,indent:n,isRunning:o})=>{let a=useContext(B),i=n===0,s="",u=t.filter((p,l)=>{let c=!!p.output,d=e.find(v=>v.display==="inline"&&v.forId===p.id),m=!!p.steps?.length&&!a.hideCot,h=l===t.length-1,_=o===void 0?a.loading&&h:o&&h;return c||d||m||!c&&_});return jsx(Fragment,{children:u.map((p,l)=>{let f=p.name,c=u.length-1===l,d=o===void 0?a.loading:o;i&&(d=d&&c);let m=f!==s,h=!1;return s=f,jsx(La,{message:p,elements:e,actions:r,showAvatar:m,showBorder:h,indent:n,isRunning:d,isLast:c},p.id)})})});var cm=memo(({actions:t,autoScroll:e,context:r,elements:n,messages:o,setAutoScroll:a})=>{let i=useRef();useEffect(()=>{!i.current||!e||(i.current.scrollTop=i.current.scrollHeight);},[o,e]);let s=()=>{if(!i.current||!a)return;let{scrollTop:u,scrollHeight:p,clientHeight:l}=i.current,f=u+l>=p-10;a(f);};return jsx(B.Provider,{value:r||Pn,children:jsx(nr,{ref:i,position:"relative",display:"flex",flexDirection:"column",flexGrow:1,sx:{overflowY:"auto"},onScroll:s,children:jsx(Ar,{indent:0,messages:o,elements:n,actions:t})})})});var mm={setVariableName:()=>{},setFunctionIndex:()=>{},setPromptMode:()=>{},setPlayground:()=>{},onNotification:()=>{},promptMode:"Formatted"},C=createContext(mm);function ro({children:t}){return jsx(Cr,{direction:"row",sx:{backgroundColor:e=>e.palette.background.paper,padding:"16px 24px",alignItems:"center",justifyContent:"flex-end",gap:2},children:t})}var Ye="delete",k=5,ot=1<<k,U=ot-1,S={};function po(){return {value:!1}}function it(t){t&&(t.value=!0);}function vo(){}function ue(t){return t.size===void 0&&(t.size=t.__iterate(cs)),t.size}function Rt(t,e){if(typeof e!="number"){var r=e>>>0;if(""+r!==e||r===4294967295)return NaN;e=r;}return e<0?ue(t)+e:e}function cs(){return !0}function Nr(t,e,r){return (t===0&&!ms(t)||r!==void 0&&t<=-r)&&(e===void 0||r!==void 0&&e>=r)}function je(t,e){return fs(t,e,0)}function qr(t,e){return fs(t,e,e)}function fs(t,e,r){return t===void 0?r:ms(t)?e===1/0?e:Math.max(0,e+t)|0:e===void 0||e===t?t:Math.min(e,t)|0}function ms(t){return t<0||t===0&&1/t===-1/0}var ds="@@__IMMUTABLE_ITERABLE__@@";function X(t){return !!(t&&t[ds])}var hs="@@__IMMUTABLE_KEYED__@@";function z(t){return !!(t&&t[hs])}var gs="@@__IMMUTABLE_INDEXED__@@";function G(t){return !!(t&&t[gs])}function Wr(t){return z(t)||G(t)}var R=function(e){return X(e)?e:et(e)},st=function(t){function e(r){return z(r)?r:Ft(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(R),te=function(t){function e(r){return G(r)?r:gt(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(R),he=function(t){function e(r){return X(r)&&!Wr(r)?r:ve(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(R);R.Keyed=st;R.Indexed=te;R.Set=he;var ys="@@__IMMUTABLE_SEQ__@@";function xo(t){return !!(t&&t[ys])}var _s="@@__IMMUTABLE_RECORD__@@";function ge(t){return !!(t&&t[_s])}function _t(t){return X(t)||ge(t)}var ye="@@__IMMUTABLE_ORDERED__@@";function dt(t){return !!(t&&t[ye])}var Ze=0,ht=1,at=2,lo=typeof Symbol=="function"&&Symbol.iterator,vs="@@iterator",Hr=lo||vs,w=function(e){this.next=e;};w.prototype.toString=function(){return "[Iterator]"};w.KEYS=Ze;w.VALUES=ht;w.ENTRIES=at;w.prototype.inspect=w.prototype.toSource=function(){return this.toString()};w.prototype[Hr]=function(){return this};function A(t,e,r,n){var o=t===0?e:t===1?r:[e,r];return n?n.value=o:n={value:o,done:!1},n}function J(){return {value:void 0,done:!0}}function xs(t){return Array.isArray(t)?!0:!!Vr(t)}function Na(t){return t&&typeof t.next=="function"}function co(t){var e=Vr(t);return e&&e.call(t)}function Vr(t){var e=t&&(lo&&t[lo]||t[vs]);if(typeof e=="function")return e}function gm(t){var e=Vr(t);return e&&e===t.entries}function ym(t){var e=Vr(t);return e&&e===t.keys}var _e=Object.prototype.hasOwnProperty;function Ss(t){return Array.isArray(t)||typeof t=="string"?!0:t&&typeof t=="object"&&Number.isInteger(t.length)&&t.length>=0&&(t.length===0?Object.keys(t).length===1:t.hasOwnProperty(t.length-1))}var et=function(t){function e(r){return r==null?wo():_t(r)?r.toSeq():vm(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq {","}")},e.prototype.cacheResult=function(){return !this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},e.prototype.__iterate=function(n,o){var a=this._cache;if(a){for(var i=a.length,s=0;s!==i;){var u=a[o?i-++s:s++];if(n(u[1],u[0],this)===!1)break}return s}return this.__iterateUncached(n,o)},e.prototype.__iterator=function(n,o){var a=this._cache;if(a){var i=a.length,s=0;return new w(function(){if(s===i)return J();var u=a[o?i-++s:s++];return A(n,u[0],u[1])})}return this.__iteratorUncached(n,o)},e}(R),Ft=function(t){function e(r){return r==null?wo().toKeyedSeq():X(r)?z(r)?r.toSeq():r.fromEntrySeq():ge(r)?r.toSeq():Io(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toKeyedSeq=function(){return this},e}(et),gt=function(t){function e(r){return r==null?wo():X(r)?z(r)?r.entrySeq():r.toIndexedSeq():ge(r)?r.toSeq().entrySeq():ws(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toIndexedSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq [","]")},e}(et),ve=function(t){function e(r){return (X(r)&&!Wr(r)?r:gt(r)).toSetSeq()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toSetSeq=function(){return this},e}(et);et.isSeq=xo;et.Keyed=Ft;et.Set=ve;et.Indexed=gt;et.prototype[ys]=!0;var Qt=function(t){function e(r){this._array=r,this.size=r.length;}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(n,o){return this.has(n)?this._array[Rt(this,n)]:o},e.prototype.__iterate=function(n,o){for(var a=this._array,i=a.length,s=0;s!==i;){var u=o?i-++s:s++;if(n(a[u],u,this)===!1)break}return s},e.prototype.__iterator=function(n,o){var a=this._array,i=a.length,s=0;return new w(function(){if(s===i)return J();var u=o?i-++s:s++;return A(n,u,a[u])})},e}(gt),So=function(t){function e(r){var n=Object.keys(r).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(r):[]);this._object=r,this._keys=n,this.size=n.length;}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(n,o){return o!==void 0&&!this.has(n)?o:this._object[n]},e.prototype.has=function(n){return _e.call(this._object,n)},e.prototype.__iterate=function(n,o){for(var a=this._object,i=this._keys,s=i.length,u=0;u!==s;){var p=i[o?s-++u:u++];if(n(a[p],p,this)===!1)break}return u},e.prototype.__iterator=function(n,o){var a=this._object,i=this._keys,s=i.length,u=0;return new w(function(){if(u===s)return J();var p=i[o?s-++u:u++];return A(n,p,a[p])})},e}(Ft);So.prototype[ye]=!0;var _m=function(t){function e(r){this._collection=r,this.size=r.length||r.size;}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__iterateUncached=function(n,o){if(o)return this.cacheResult().__iterate(n,o);var a=this._collection,i=co(a),s=0;if(Na(i))for(var u;!(u=i.next()).done&&n(u.value,s++,this)!==!1;);return s},e.prototype.__iteratorUncached=function(n,o){if(o)return this.cacheResult().__iterator(n,o);var a=this._collection,i=co(a);if(!Na(i))return new w(J);var s=0;return new w(function(){var u=i.next();return u.done?u:A(n,s++,u.value)})},e}(gt),qa;function wo(){return qa||(qa=new Qt([]))}function Io(t){var e=bo(t);if(e)return e.fromEntrySeq();if(typeof t=="object")return new So(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function ws(t){var e=bo(t);if(e)return e;throw new TypeError("Expected Array or collection object of values: "+t)}function vm(t){var e=bo(t);if(e)return gm(t)?e.fromEntrySeq():ym(t)?e.toSetSeq():e;if(typeof t=="object")return new So(t);throw new TypeError("Expected Array or collection object of values, or keyed object: "+t)}function bo(t){return Ss(t)?new Qt(t):xs(t)?new _m(t):void 0}var Is="@@__IMMUTABLE_MAP__@@";function Eo(t){return !!(t&&t[Is])}function bs(t){return Eo(t)&&dt(t)}function Wa(t){return !!(t&&typeof t.equals=="function"&&typeof t.hashCode=="function")}function tt(t,e){if(t===e||t!==t&&e!==e)return !0;if(!t||!e)return !1;if(typeof t.valueOf=="function"&&typeof e.valueOf=="function"){if(t=t.valueOf(),e=e.valueOf(),t===e||t!==t&&e!==e)return !0;if(!t||!e)return !1}return !!(Wa(t)&&Wa(e)&&t.equals(e))}var Ne=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(e,r){e|=0,r|=0;var n=e&65535,o=r&65535;return n*o+((e>>>16)*o+n*(r>>>16)<<16>>>0)|0};function Ur(t){return t>>>1&1073741824|t&3221225471}var xm=Object.prototype.valueOf;function Z(t){if(t==null)return Ha(t);if(typeof t.hashCode=="function")return Ur(t.hashCode(t));var e=Cm(t);if(e==null)return Ha(e);switch(typeof e){case"boolean":return e?1108378657:1108378656;case"number":return Sm(e);case"string":return e.length>Mm?wm(e):fo(e);case"object":case"function":return bm(e);case"symbol":return Im(e);default:if(typeof e.toString=="function")return fo(e.toString());throw new Error("Value type "+typeof e+" cannot be hashed.")}}function Ha(t){return t===null?1108378658:1108378659}function Sm(t){if(t!==t||t===1/0)return 0;var e=t|0;for(e!==t&&(e^=t*4294967295);t>4294967295;)t/=4294967295,e^=t;return Ur(e)}function wm(t){var e=io[t];return e===void 0&&(e=fo(t),oo===Pm&&(oo=0,io={}),oo++,io[t]=e),e}function fo(t){for(var e=0,r=0;r<t.length;r++)e=31*e+t.charCodeAt(r)|0;return Ur(e)}function Im(t){var e=Ka[t];return e!==void 0||(e=Es(),Ka[t]=e),e}function bm(t){var e;if(mo&&(e=ho.get(t),e!==void 0)||(e=t[Zt],e!==void 0)||!Ua&&(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Zt],e!==void 0||(e=Em(t),e!==void 0)))return e;if(e=Es(),mo)ho.set(t,e);else {if(Va!==void 0&&Va(t)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(Ua)Object.defineProperty(t,Zt,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(t.propertyIsEnumerable!==void 0&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Zt]=e;else if(t.nodeType!==void 0)t[Zt]=e;else throw new Error("Unable to set a non-enumerable property on object.")}return e}var Va=Object.isExtensible,Ua=function(){try{return Object.defineProperty({},"@",{}),!0}catch{return !1}}();function Em(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}function Cm(t){return t.valueOf!==xm&&typeof t.valueOf=="function"?t.valueOf(t):t}function Es(){var t=++no;return no&1073741824&&(no=0),t}var mo=typeof WeakMap=="function",ho;mo&&(ho=new WeakMap);var Ka=Object.create(null),no=0,Zt="__immutablehash__";typeof Symbol=="function"&&(Zt=Symbol(Zt));var Mm=16,Pm=255,oo=0,io={},Kr=function(t){function e(r,n){this._iter=r,this._useKeys=n,this.size=r.size;}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(n,o){return this._iter.get(n,o)},e.prototype.has=function(n){return this._iter.has(n)},e.prototype.valueSeq=function(){return this._iter.valueSeq()},e.prototype.reverse=function(){var n=this,o=Co(this,!0);return this._useKeys||(o.valueSeq=function(){return n._iter.toSeq().reverse()}),o},e.prototype.map=function(n,o){var a=this,i=Ts(this,n,o);return this._useKeys||(i.valueSeq=function(){return a._iter.toSeq().map(n,o)}),i},e.prototype.__iterate=function(n,o){var a=this;return this._iter.__iterate(function(i,s){return n(i,s,a)},o)},e.prototype.__iterator=function(n,o){return this._iter.__iterator(n,o)},e}(Ft);Kr.prototype[ye]=!0;var Cs=function(t){function e(r){this._iter=r,this.size=r.size;}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.includes=function(n){return this._iter.includes(n)},e.prototype.__iterate=function(n,o){var a=this,i=0;return o&&ue(this),this._iter.__iterate(function(s){return n(s,o?a.size-++i:i++,a)},o)},e.prototype.__iterator=function(n,o){var a=this,i=this._iter.__iterator(ht,o),s=0;return o&&ue(this),new w(function(){var u=i.next();return u.done?u:A(n,o?a.size-++s:s++,u.value,u)})},e}(gt),Ms=function(t){function e(r){this._iter=r,this.size=r.size;}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.has=function(n){return this._iter.includes(n)},e.prototype.__iterate=function(n,o){var a=this;return this._iter.__iterate(function(i){return n(i,i,a)},o)},e.prototype.__iterator=function(n,o){var a=this._iter.__iterator(ht,o);return new w(function(){var i=a.next();return i.done?i:A(n,i.value,i.value,i)})},e}(ve),Ps=function(t){function e(r){this._iter=r,this.size=r.size;}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.entrySeq=function(){return this._iter.toSeq()},e.prototype.__iterate=function(n,o){var a=this;return this._iter.__iterate(function(i){if(i){Xa(i);var s=X(i);return n(s?i.get(1):i[1],s?i.get(0):i[0],a)}},o)},e.prototype.__iterator=function(n,o){var a=this._iter.__iterator(ht,o);return new w(function(){for(;;){var i=a.next();if(i.done)return i;var s=i.value;if(s){Xa(s);var u=X(s);return A(n,u?s.get(0):s[0],u?s.get(1):s[1],i)}}})},e}(Ft);Cs.prototype.cacheResult=Kr.prototype.cacheResult=Ms.prototype.cacheResult=Ps.prototype.cacheResult=ko;function ks(t){var e=vt(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var r=t.reverse.apply(this);return r.flip=function(){return t.reverse()},r},e.has=function(r){return t.includes(r)},e.includes=function(r){return t.has(r)},e.cacheResult=ko,e.__iterateUncached=function(r,n){var o=this;return t.__iterate(function(a,i){return r(i,a,o)!==!1},n)},e.__iteratorUncached=function(r,n){if(r===at){var o=t.__iterator(r,n);return new w(function(){var a=o.next();if(!a.done){var i=a.value[0];a.value[0]=a.value[1],a.value[1]=i;}return a})}return t.__iterator(r===ht?Ze:ht,n)},e}function Ts(t,e,r){var n=vt(t);return n.size=t.size,n.has=function(o){return t.has(o)},n.get=function(o,a){var i=t.get(o,S);return i===S?a:e.call(r,i,o,t)},n.__iterateUncached=function(o,a){var i=this;return t.__iterate(function(s,u,p){return o(e.call(r,s,u,p),u,i)!==!1},a)},n.__iteratorUncached=function(o,a){var i=t.__iterator(at,a);return new w(function(){var s=i.next();if(s.done)return s;var u=s.value,p=u[0];return A(o,p,e.call(r,u[1],p,t),s)})},n}function Co(t,e){var r=this,n=vt(t);return n._iter=t,n.size=t.size,n.reverse=function(){return t},t.flip&&(n.flip=function(){var o=ks(t);return o.reverse=function(){return t.flip()},o}),n.get=function(o,a){return t.get(e?o:-1-o,a)},n.has=function(o){return t.has(e?o:-1-o)},n.includes=function(o){return t.includes(o)},n.cacheResult=ko,n.__iterate=function(o,a){var i=this,s=0;return a&&ue(t),t.__iterate(function(u,p){return o(u,e?p:a?i.size-++s:s++,i)},!a)},n.__iterator=function(o,a){var i=0;a&&ue(t);var s=t.__iterator(at,!a);return new w(function(){var u=s.next();if(u.done)return u;var p=u.value;return A(o,e?p[0]:a?r.size-++i:i++,p[1],u)})},n}function zs(t,e,r,n){var o=vt(t);return n&&(o.has=function(a){var i=t.get(a,S);return i!==S&&!!e.call(r,i,a,t)},o.get=function(a,i){var s=t.get(a,S);return s!==S&&e.call(r,s,a,t)?s:i}),o.__iterateUncached=function(a,i){var s=this,u=0;return t.__iterate(function(p,l,f){if(e.call(r,p,l,f))return u++,a(p,n?l:u-1,s)},i),u},o.__iteratorUncached=function(a,i){var s=t.__iterator(at,i),u=0;return new w(function(){for(;;){var p=s.next();if(p.done)return p;var l=p.value,f=l[0],c=l[1];if(e.call(r,c,f,t))return A(a,n?f:u++,c,p)}})},o}function km(t,e,r){var n=Se().asMutable();return t.__iterate(function(o,a){n.update(e.call(r,o,a,t),0,function(i){return i+1});}),n.asImmutable()}function Tm(t,e,r){var n=z(t),o=(dt(t)?wt():Se()).asMutable();t.__iterate(function(i,s){o.update(e.call(r,i,s,t),function(u){return u=u||[],u.push(n?[s,i]:i),u});});var a=Po(t);return o.map(function(i){return E(t,a(i))}).asImmutable()}function zm(t,e,r){var n=z(t),o=[[],[]];t.__iterate(function(i,s){o[e.call(r,i,s,t)?1:0].push(n?[s,i]:i);});var a=Po(t);return o.map(function(i){return E(t,a(i))})}function Mo(t,e,r,n){var o=t.size;if(Nr(e,r,o))return t;var a=je(e,o),i=qr(r,o);if(a!==a||i!==i)return Mo(t.toSeq().cacheResult(),e,r,n);var s=i-a,u;s===s&&(u=s<0?0:s);var p=vt(t);return p.size=u===0?u:t.size&&u||void 0,!n&&xo(t)&&u>=0&&(p.get=function(l,f){return l=Rt(this,l),l>=0&&l<u?t.get(l+a,f):f}),p.__iterateUncached=function(l,f){var c=this;if(u===0)return 0;if(f)return this.cacheResult().__iterate(l,f);var d=0,m=!0,h=0;return t.__iterate(function(_,v){if(!(m&&(m=d++<a)))return h++,l(_,n?v:h-1,c)!==!1&&h!==u}),h},p.__iteratorUncached=function(l,f){if(u!==0&&f)return this.cacheResult().__iterator(l,f);if(u===0)return new w(J);var c=t.__iterator(l,f),d=0,m=0;return new w(function(){for(;d++<a;)c.next();if(++m>u)return J();var h=c.next();return n||l===ht||h.done?h:l===Ze?A(l,m-1,void 0,h):A(l,m-1,h.value[1],h)})},p}function Am(t,e,r){var n=vt(t);return n.__iterateUncached=function(o,a){var i=this;if(a)return this.cacheResult().__iterate(o,a);var s=0;return t.__iterate(function(u,p,l){return e.call(r,u,p,l)&&++s&&o(u,p,i)}),s},n.__iteratorUncached=function(o,a){var i=this;if(a)return this.cacheResult().__iterator(o,a);var s=t.__iterator(at,a),u=!0;return new w(function(){if(!u)return J();var p=s.next();if(p.done)return p;var l=p.value,f=l[0],c=l[1];return e.call(r,c,f,i)?o===at?p:A(o,f,c,p):(u=!1,J())})},n}function As(t,e,r,n){var o=vt(t);return o.__iterateUncached=function(a,i){var s=this;if(i)return this.cacheResult().__iterate(a,i);var u=!0,p=0;return t.__iterate(function(l,f,c){if(!(u&&(u=e.call(r,l,f,c))))return p++,a(l,n?f:p-1,s)}),p},o.__iteratorUncached=function(a,i){var s=this;if(i)return this.cacheResult().__iterator(a,i);var u=t.__iterator(at,i),p=!0,l=0;return new w(function(){var f,c,d;do{if(f=u.next(),f.done)return n||a===ht?f:a===Ze?A(a,l++,void 0,f):A(a,l++,f.value[1],f);var m=f.value;c=m[0],d=m[1],p&&(p=e.call(r,d,c,s));}while(p);return a===at?f:A(a,c,d,f)})},o}function Bm(t,e){var r=z(t),n=[t].concat(e).map(function(i){return X(i)?r&&(i=st(i)):i=r?Io(i):ws(Array.isArray(i)?i:[i]),i}).filter(function(i){return i.size!==0});if(n.length===0)return t;if(n.length===1){var o=n[0];if(o===t||r&&z(o)||G(t)&&G(o))return o}var a=new Qt(n);return r?a=a.toKeyedSeq():G(t)||(a=a.toSetSeq()),a=a.flatten(!0),a.size=n.reduce(function(i,s){if(i!==void 0){var u=s.size;if(u!==void 0)return i+u}},0),a}function Bs(t,e,r){var n=vt(t);return n.__iterateUncached=function(o,a){if(a)return this.cacheResult().__iterate(o,a);var i=0,s=!1;function u(p,l){p.__iterate(function(f,c){return (!e||l<e)&&X(f)?u(f,l+1):(i++,o(f,r?c:i-1,n)===!1&&(s=!0)),!s},a);}return u(t,0),i},n.__iteratorUncached=function(o,a){if(a)return this.cacheResult().__iterator(o,a);var i=t.__iterator(o,a),s=[],u=0;return new w(function(){for(;i;){var p=i.next();if(p.done!==!1){i=s.pop();continue}var l=p.value;if(o===at&&(l=l[1]),(!e||s.length<e)&&X(l))s.push(i),i=l.__iterator(o,a);else return r?p:A(o,u++,l,p)}return J()})},n}function Rm(t,e,r){var n=Po(t);return t.toSeq().map(function(o,a){return n(e.call(r,o,a,t))}).flatten(!0)}function Om(t,e){var r=vt(t);return r.size=t.size&&t.size*2-1,r.__iterateUncached=function(n,o){var a=this,i=0;return t.__iterate(function(s){return (!i||n(e,i++,a)!==!1)&&n(s,i++,a)!==!1},o),i},r.__iteratorUncached=function(n,o){var a=t.__iterator(ht,o),i=0,s;return new w(function(){return (!s||i%2)&&(s=a.next(),s.done)?s:i%2?A(n,i++,e):A(n,i++,s.value,s)})},r}function pe(t,e,r){e||(e=Rs);var n=z(t),o=0,a=t.toSeq().map(function(i,s){return [s,i,o++,r?r(i,s,t):i]}).valueSeq().toArray();return a.sort(function(i,s){return e(i[3],s[3])||i[2]-s[2]}).forEach(n?function(i,s){a[s].length=2;}:function(i,s){a[s]=i[1];}),n?Ft(a):G(t)?gt(a):ve(a)}function Br(t,e,r){if(e||(e=Rs),r){var n=t.toSeq().map(function(o,a){return [o,r(o,a,t)]}).reduce(function(o,a){return Ga(e,o[1],a[1])?a:o});return n&&n[0]}return t.reduce(function(o,a){return Ga(e,o,a)?a:o})}function Ga(t,e,r){var n=t(r,e);return n===0&&r!==e&&(r==null||r!==r)||n>0}function Rr(t,e,r,n){var o=vt(t),a=new Qt(r).map(function(i){return i.size});return o.size=n?a.max():a.min(),o.__iterate=function(i,s){for(var u=this.__iterator(ht,s),p,l=0;!(p=u.next()).done&&i(p.value,l++,this)!==!1;);return l},o.__iteratorUncached=function(i,s){var u=r.map(function(f){return f=R(f),co(s?f.reverse():f)}),p=0,l=!1;return new w(function(){var f;return l||(f=u.map(function(c){return c.next()}),l=n?f.every(function(c){return c.done}):f.some(function(c){return c.done})),l?J():A(i,p++,e.apply(null,f.map(function(c){return c.value})))})},o}function E(t,e){return t===e?t:xo(t)?e:t.constructor(e)}function Xa(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Po(t){return z(t)?st:G(t)?te:he}function vt(t){return Object.create((z(t)?Ft:G(t)?gt:ve).prototype)}function ko(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):et.prototype.cacheResult.call(this)}function Rs(t,e){return t===void 0&&e===void 0?0:t===void 0?1:e===void 0?-1:t>e?1:t<e?-1:0}function yt(t,e){e=e||0;for(var r=Math.max(0,t.length-e),n=new Array(r),o=0;o<r;o++)n[o]=t[o+e];return n}function To(t,e){if(!t)throw new Error(e)}function Q(t){To(t!==1/0,"Cannot perform this action with an infinite size.");}function Os(t){if(Ss(t)&&typeof t!="string")return t;if(dt(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}var Fm=Object.prototype.toString;function Dm(t){if(!t||typeof t!="object"||Fm.call(t)!=="[object Object]")return !1;var e=Object.getPrototypeOf(t);if(e===null)return !0;for(var r=e,n=Object.getPrototypeOf(e);n!==null;)r=n,n=Object.getPrototypeOf(r);return r===e}function Ot(t){return typeof t=="object"&&(_t(t)||Array.isArray(t)||Dm(t))}function Ue(t){try{return typeof t=="string"?JSON.stringify(t):String(t)}catch{return JSON.stringify(t)}}function Lm(t,e){return _t(t)?t.has(e):Ot(t)&&_e.call(t,e)}function Fs(t,e,r){return _t(t)?t.get(e,r):Lm(t,e)?typeof t.get=="function"?t.get(e):t[e]:r}function Lr(t){if(Array.isArray(t))return yt(t);var e={};for(var r in t)_e.call(t,r)&&(e[r]=t[r]);return e}function $m(t,e){if(!Ot(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(_t(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(e)}if(!_e.call(t,e))return t;var r=Lr(t);return Array.isArray(r)?r.splice(e,1):delete r[e],r}function Nm(t,e,r){if(!Ot(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(_t(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(e,r)}if(_e.call(t,e)&&r===t[e])return t;var n=Lr(t);return n[e]=r,n}function xe(t,e,r,n){n||(n=r,r=void 0);var o=Ds(_t(t),t,Os(e),0,r,n);return o===S?r:o}function Ds(t,e,r,n,o,a){var i=e===S;if(n===r.length){var s=i?o:e,u=a(s);return u===s?e:u}if(!i&&!Ot(e))throw new TypeError("Cannot update within non-data-structure value in path ["+r.slice(0,n).map(Ue)+"]: "+e);var p=r[n],l=i?S:Fs(e,p,S),f=Ds(l===S?t:_t(l),l,r,n+1,o,a);return f===l?e:f===S?$m(e,p):Nm(i?t?mt():{}:e,p,f)}function qm(t,e,r){return xe(t,e,S,function(){return r})}function zo(t,e){return qm(this,t,e)}function Wm(t,e){return xe(t,e,function(){return S})}function Ao(t){return Wm(this,t)}function Ls(t,e,r,n){return xe(t,[e],r,n)}function Bo(t,e,r){return arguments.length===1?t(this):Ls(this,t,e,r)}function Ro(t,e,r){return xe(this,t,e,r)}function $s(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return qs(this,t)}function Ns(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];if(typeof t!="function")throw new TypeError("Invalid merger function: "+t);return qs(this,e,t)}function qs(t,e,r){for(var n=[],o=0;o<e.length;o++){var a=st(e[o]);a.size!==0&&n.push(a);}return n.length===0?t:t.toSeq().size===0&&!t.__ownerID&&n.length===1?t.constructor(n[0]):t.withMutations(function(i){for(var s=r?function(p,l){Ls(i,l,S,function(f){return f===S?p:r(f,p,l)});}:function(p,l){i.set(l,p);},u=0;u<n.length;u++)n[u].forEach(s);})}function Oo(t,e,r){return Fo(t,e,Hm(r))}function Fo(t,e,r){if(!Ot(t))throw new TypeError("Cannot merge into non-data-structure value: "+t);if(_t(t))return typeof r=="function"&&t.mergeWith?t.mergeWith.apply(t,[r].concat(e)):t.merge?t.merge.apply(t,e):t.concat.apply(t,e);for(var n=Array.isArray(t),o=t,a=n?te:st,i=n?function(u){o===t&&(o=Lr(o)),o.push(u);}:function(u,p){var l=_e.call(o,p),f=l&&r?r(o[p],u,p):u;(!l||f!==o[p])&&(o===t&&(o=Lr(o)),o[p]=f);},s=0;s<e.length;s++)a(e[s]).forEach(i);return o}function Hm(t){function e(r,n,o){return Ot(r)&&Ot(n)&&Vm(r,n)?Fo(r,[n],e):t?t(r,n,o):n}return e}function Vm(t,e){var r=et(t),n=et(e);return G(r)===G(n)&&z(r)===z(n)}function Ws(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Oo(this,t)}function Hs(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return Oo(this,e,t)}function Do(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return xe(this,t,mt(),function(n){return Fo(n,e)})}function Lo(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return xe(this,t,mt(),function(n){return Oo(n,e)})}function Qe(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this}function tr(){return this.__ownerID?this:this.__ensureOwner(new vo)}function er(){return this.__ensureOwner()}function $o(){return this.__altered}var Se=function(t){function e(r){return r==null?mt():Eo(r)&&!dt(r)?r:mt().withMutations(function(n){var o=t(r);Q(o.size),o.forEach(function(a,i){return n.set(i,a)});})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){for(var n=[],o=arguments.length;o--;)n[o]=arguments[o];return mt().withMutations(function(a){for(var i=0;i<n.length;i+=2){if(i+1>=n.length)throw new Error("Missing value for key: "+n[i]);a.set(n[i],n[i+1]);}})},e.prototype.toString=function(){return this.__toString("Map {","}")},e.prototype.get=function(n,o){return this._root?this._root.get(0,void 0,n,o):o},e.prototype.set=function(n,o){return ja(this,n,o)},e.prototype.remove=function(n){return ja(this,n,S)},e.prototype.deleteAll=function(n){var o=R(n);return o.size===0?this:this.withMutations(function(a){o.forEach(function(i){return a.remove(i)});})},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):mt()},e.prototype.sort=function(n){return wt(pe(this,n))},e.prototype.sortBy=function(n,o){return wt(pe(this,o,n))},e.prototype.map=function(n,o){var a=this;return this.withMutations(function(i){i.forEach(function(s,u){i.set(u,n.call(o,s,u,a));});})},e.prototype.__iterator=function(n,o){return new Um(this,n,o)},e.prototype.__iterate=function(n,o){var a=this,i=0;return this._root&&this._root.iterate(function(s){return i++,n(s[1],s[0],a)},o),i},e.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?No(this.size,this._root,n,this.__hash):this.size===0?mt():(this.__ownerID=n,this.__altered=!1,this)},e}(st);Se.isMap=Eo;var T=Se.prototype;T[Is]=!0;T[Ye]=T.remove;T.removeAll=T.deleteAll;T.setIn=zo;T.removeIn=T.deleteIn=Ao;T.update=Bo;T.updateIn=Ro;T.merge=T.concat=$s;T.mergeWith=Ns;T.mergeDeep=Ws;T.mergeDeepWith=Hs;T.mergeIn=Do;T.mergeDeepIn=Lo;T.withMutations=Qe;T.wasAltered=$o;T.asImmutable=er;T["@@transducer/init"]=T.asMutable=tr;T["@@transducer/step"]=function(t,e){return t.set(e[0],e[1])};T["@@transducer/result"]=function(t){return t.asImmutable()};var Ke=function(e,r){this.ownerID=e,this.entries=r;};Ke.prototype.get=function(e,r,n,o){for(var a=this.entries,i=0,s=a.length;i<s;i++)if(tt(n,a[i][0]))return a[i][1];return o};Ke.prototype.update=function(e,r,n,o,a,i,s){for(var u=a===S,p=this.entries,l=0,f=p.length;l<f&&!tt(o,p[l][0]);l++);var c=l<f;if(c?p[l][1]===a:u)return this;if(it(s),(u||!c)&&it(i),!(u&&p.length===1)){if(!c&&!u&&p.length>=jm)return Km(e,p,o,a);var d=e&&e===this.ownerID,m=d?p:yt(p);return c?u?l===f-1?m.pop():m[l]=m.pop():m[l]=[o,a]:m.push([o,a]),d?(this.entries=m,this):new Ke(e,m)}};var le=function(e,r,n){this.ownerID=e,this.bitmap=r,this.nodes=n;};le.prototype.get=function(e,r,n,o){r===void 0&&(r=Z(n));var a=1<<((e===0?r:r>>>e)&U),i=this.bitmap;return i&a?this.nodes[Vs(i&a-1)].get(e+k,r,n,o):o};le.prototype.update=function(e,r,n,o,a,i,s){n===void 0&&(n=Z(o));var u=(r===0?n:n>>>r)&U,p=1<<u,l=this.bitmap,f=(l&p)!==0;if(!f&&a===S)return this;var c=Vs(l&p-1),d=this.nodes,m=f?d[c]:void 0,h=qo(m,e,r+k,n,o,a,i,s);if(h===m)return this;if(!f&&h&&d.length>=Zm)return Xm(e,d,l,u,h);if(f&&!h&&d.length===2&&Za(d[c^1]))return d[c^1];if(f&&h&&d.length===1&&Za(h))return h;var _=e&&e===this.ownerID,v=f?h?l:l^p:l|p,I=f?h?Us(d,c,h,_):Ym(d,c,_):Jm(d,c,h,_);return _?(this.bitmap=v,this.nodes=I,this):new le(e,v,I)};var Ge=function(e,r,n){this.ownerID=e,this.count=r,this.nodes=n;};Ge.prototype.get=function(e,r,n,o){r===void 0&&(r=Z(n));var a=(e===0?r:r>>>e)&U,i=this.nodes[a];return i?i.get(e+k,r,n,o):o};Ge.prototype.update=function(e,r,n,o,a,i,s){n===void 0&&(n=Z(o));var u=(r===0?n:n>>>r)&U,p=a===S,l=this.nodes,f=l[u];if(p&&!f)return this;var c=qo(f,e,r+k,n,o,a,i,s);if(c===f)return this;var d=this.count;if(!f)d++;else if(!c&&(d--,d<Qm))return Gm(e,l,d,u);var m=e&&e===this.ownerID,h=Us(l,u,c,m);return m?(this.count=d,this.nodes=h,this):new Ge(e,d,h)};var ce=function(e,r,n){this.ownerID=e,this.keyHash=r,this.entries=n;};ce.prototype.get=function(e,r,n,o){for(var a=this.entries,i=0,s=a.length;i<s;i++)if(tt(n,a[i][0]))return a[i][1];return o};ce.prototype.update=function(e,r,n,o,a,i,s){n===void 0&&(n=Z(o));var u=a===S;if(n!==this.keyHash)return u?this:(it(s),it(i),Wo(this,e,r,n,[o,a]));for(var p=this.entries,l=0,f=p.length;l<f&&!tt(o,p[l][0]);l++);var c=l<f;if(c?p[l][1]===a:u)return this;if(it(s),(u||!c)&&it(i),u&&f===2)return new St(e,this.keyHash,p[l^1]);var d=e&&e===this.ownerID,m=d?p:yt(p);return c?u?l===f-1?m.pop():m[l]=m.pop():m[l]=[o,a]:m.push([o,a]),d?(this.entries=m,this):new ce(e,this.keyHash,m)};var St=function(e,r,n){this.ownerID=e,this.keyHash=r,this.entry=n;};St.prototype.get=function(e,r,n,o){return tt(n,this.entry[0])?this.entry[1]:o};St.prototype.update=function(e,r,n,o,a,i,s){var u=a===S,p=tt(o,this.entry[0]);if(p?a===this.entry[1]:u)return this;if(it(s),u){it(i);return}return p?e&&e===this.ownerID?(this.entry[1]=a,this):new St(e,this.keyHash,[o,a]):(it(i),Wo(this,e,r,Z(o),[o,a]))};Ke.prototype.iterate=ce.prototype.iterate=function(t,e){for(var r=this.entries,n=0,o=r.length-1;n<=o;n++)if(t(r[e?o-n:n])===!1)return !1};le.prototype.iterate=Ge.prototype.iterate=function(t,e){for(var r=this.nodes,n=0,o=r.length-1;n<=o;n++){var a=r[e?o-n:n];if(a&&a.iterate(t,e)===!1)return !1}};St.prototype.iterate=function(t,e){return t(this.entry)};var Um=function(t){function e(r,n,o){this._type=n,this._reverse=o,this._stack=r._root&&Ja(r._root);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){for(var n=this._type,o=this._stack;o;){var a=o.node,i=o.index++,s=void 0;if(a.entry){if(i===0)return ao(n,a.entry)}else if(a.entries){if(s=a.entries.length-1,i<=s)return ao(n,a.entries[this._reverse?s-i:i])}else if(s=a.nodes.length-1,i<=s){var u=a.nodes[this._reverse?s-i:i];if(u){if(u.entry)return ao(n,u.entry);o=this._stack=Ja(u,o);}continue}o=this._stack=this._stack.__prev;}return J()},e}(w);function ao(t,e){return A(t,e[0],e[1])}function Ja(t,e){return {node:t,index:0,__prev:e}}function No(t,e,r,n){var o=Object.create(T);return o.size=t,o._root=e,o.__ownerID=r,o.__hash=n,o.__altered=!1,o}var Ya;function mt(){return Ya||(Ya=No(0))}function ja(t,e,r){var n,o;if(t._root){var a=po(),i=po();if(n=qo(t._root,t.__ownerID,0,void 0,e,r,a,i),!i.value)return t;o=t.size+(a.value?r===S?-1:1:0);}else {if(r===S)return t;o=1,n=new Ke(t.__ownerID,[[e,r]]);}return t.__ownerID?(t.size=o,t._root=n,t.__hash=void 0,t.__altered=!0,t):n?No(o,n):mt()}function qo(t,e,r,n,o,a,i,s){return t?t.update(e,r,n,o,a,i,s):a===S?t:(it(s),it(i),new St(e,n,[o,a]))}function Za(t){return t.constructor===St||t.constructor===ce}function Wo(t,e,r,n,o){if(t.keyHash===n)return new ce(e,n,[t.entry,o]);var a=(r===0?t.keyHash:t.keyHash>>>r)&U,i=(r===0?n:n>>>r)&U,s,u=a===i?[Wo(t,e,r+k,n,o)]:(s=new St(e,n,o),a<i?[t,s]:[s,t]);return new le(e,1<<a|1<<i,u)}function Km(t,e,r,n){t||(t=new vo);for(var o=new St(t,Z(r),[r,n]),a=0;a<e.length;a++){var i=e[a];o=o.update(t,0,void 0,i[0],i[1]);}return o}function Gm(t,e,r,n){for(var o=0,a=0,i=new Array(r),s=0,u=1,p=e.length;s<p;s++,u<<=1){var l=e[s];l!==void 0&&s!==n&&(o|=u,i[a++]=l);}return new le(t,o,i)}function Xm(t,e,r,n,o){for(var a=0,i=new Array(ot),s=0;r!==0;s++,r>>>=1)i[s]=r&1?e[a++]:void 0;return i[n]=o,new Ge(t,a+1,i)}function Vs(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,t+=t>>16,t&127}function Us(t,e,r,n){var o=n?t:yt(t);return o[e]=r,o}function Jm(t,e,r,n){var o=t.length+1;if(n&&e+1===o)return t[e]=r,t;for(var a=new Array(o),i=0,s=0;s<o;s++)s===e?(a[s]=r,i=-1):a[s]=t[s+i];return a}function Ym(t,e,r){var n=t.length-1;if(r&&e===n)return t.pop(),t;for(var o=new Array(n),a=0,i=0;i<n;i++)i===e&&(a=1),o[i]=t[i+a];return o}var jm=ot/4,Zm=ot/2,Qm=ot/4,Ks="@@__IMMUTABLE_LIST__@@";function Gs(t){return !!(t&&t[Ks])}var Gr=function(t){function e(r){var n=Dr();if(r==null)return n;if(Gs(r))return r;var o=t(r),a=o.size;return a===0?n:(Q(a),a>0&&a<ot?Xe(0,a,k,null,new Bt(o.toArray())):n.withMutations(function(i){i.setSize(a),o.forEach(function(s,u){return i.set(u,s)});}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("List [","]")},e.prototype.get=function(n,o){if(n=Rt(this,n),n>=0&&n<this.size){n+=this._origin;var a=Xs(this,n);return a&&a.array[n&U]}return o},e.prototype.set=function(n,o){return td(this,n,o)},e.prototype.remove=function(n){return this.has(n)?n===0?this.shift():n===this.size-1?this.pop():this.splice(n,1):this},e.prototype.insert=function(n,o){return this.splice(n,0,o)},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=k,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):Dr()},e.prototype.push=function(){var n=arguments,o=this.size;return this.withMutations(function(a){At(a,0,o+n.length);for(var i=0;i<n.length;i++)a.set(o+i,n[i]);})},e.prototype.pop=function(){return At(this,0,-1)},e.prototype.unshift=function(){var n=arguments;return this.withMutations(function(o){At(o,-n.length);for(var a=0;a<n.length;a++)o.set(a,n[a]);})},e.prototype.shift=function(){return At(this,1)},e.prototype.concat=function(){for(var n=arguments,o=[],a=0;a<arguments.length;a++){var i=n[a],s=t(typeof i!="string"&&xs(i)?i:[i]);s.size!==0&&o.push(s);}return o.length===0?this:this.size===0&&!this.__ownerID&&o.length===1?this.constructor(o[0]):this.withMutations(function(u){o.forEach(function(p){return p.forEach(function(l){return u.push(l)})});})},e.prototype.setSize=function(n){return At(this,0,n)},e.prototype.map=function(n,o){var a=this;return this.withMutations(function(i){for(var s=0;s<a.size;s++)i.set(s,n.call(o,i.get(s),s,a));})},e.prototype.slice=function(n,o){var a=this.size;return Nr(n,o,a)?this:At(this,je(n,a),qr(o,a))},e.prototype.__iterator=function(n,o){var a=o?this.size:0,i=Qa(this,o);return new w(function(){var s=i();return s===Ve?J():A(n,o?--a:a++,s)})},e.prototype.__iterate=function(n,o){for(var a=o?this.size:0,i=Qa(this,o),s;(s=i())!==Ve&&n(s,o?--a:a++,this)!==!1;);return a},e.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?Xe(this._origin,this._capacity,this._level,this._root,this._tail,n,this.__hash):this.size===0?Dr():(this.__ownerID=n,this.__altered=!1,this)},e}(te);Gr.isList=Gs;var O=Gr.prototype;O[Ks]=!0;O[Ye]=O.remove;O.merge=O.concat;O.setIn=zo;O.deleteIn=O.removeIn=Ao;O.update=Bo;O.updateIn=Ro;O.mergeIn=Do;O.mergeDeepIn=Lo;O.withMutations=Qe;O.wasAltered=$o;O.asImmutable=er;O["@@transducer/init"]=O.asMutable=tr;O["@@transducer/step"]=function(t,e){return t.push(e)};O["@@transducer/result"]=function(t){return t.asImmutable()};var Bt=function(e,r){this.array=e,this.ownerID=r;};Bt.prototype.removeBefore=function(e,r,n){if(n===r?1<<r:this.array.length===0)return this;var o=n>>>r&U;if(o>=this.array.length)return new Bt([],e);var a=o===0,i;if(r>0){var s=this.array[o];if(i=s&&s.removeBefore(e,r-k,n),i===s&&a)return this}if(a&&!i)return this;var u=fe(this,e);if(!a)for(var p=0;p<o;p++)u.array[p]=void 0;return i&&(u.array[o]=i),u};Bt.prototype.removeAfter=function(e,r,n){if(n===(r?1<<r:0)||this.array.length===0)return this;var o=n-1>>>r&U;if(o>=this.array.length)return this;var a;if(r>0){var i=this.array[o];if(a=i&&i.removeAfter(e,r-k,n),a===i&&o===this.array.length-1)return this}var s=fe(this,e);return s.array.splice(o+1),a&&(s.array[o]=a),s};var Ve={};function Qa(t,e){var r=t._origin,n=t._capacity,o=Je(n),a=t._tail;return i(t._root,t._level,0);function i(p,l,f){return l===0?s(p,f):u(p,l,f)}function s(p,l){var f=l===o?a&&a.array:p&&p.array,c=l>r?0:r-l,d=n-l;return d>ot&&(d=ot),function(){if(c===d)return Ve;var m=e?--d:c++;return f&&f[m]}}function u(p,l,f){var c,d=p&&p.array,m=f>r?0:r-f>>l,h=(n-f>>l)+1;return h>ot&&(h=ot),function(){for(;;){if(c){var _=c();if(_!==Ve)return _;c=null;}if(m===h)return Ve;var v=e?--h:m++;c=i(d&&d[v],l-k,f+(v<<l));}}}}function Xe(t,e,r,n,o,a,i){var s=Object.create(O);return s.size=e-t,s._origin=t,s._capacity=e,s._level=r,s._root=n,s._tail=o,s.__ownerID=a,s.__hash=i,s.__altered=!1,s}var ts;function Dr(){return ts||(ts=Xe(0,0,k))}function td(t,e,r){if(e=Rt(t,e),e!==e)return t;if(e>=t.size||e<0)return t.withMutations(function(i){e<0?At(i,e).set(0,r):At(i,0,e+1).set(e,r);});e+=t._origin;var n=t._tail,o=t._root,a=po();return e>=Je(t._capacity)?n=go(n,t.__ownerID,0,e,r,a):o=go(o,t.__ownerID,t._level,e,r,a),a.value?t.__ownerID?(t._root=o,t._tail=n,t.__hash=void 0,t.__altered=!0,t):Xe(t._origin,t._capacity,t._level,o,n):t}function go(t,e,r,n,o,a){var i=n>>>r&U,s=t&&i<t.array.length;if(!s&&o===void 0)return t;var u;if(r>0){var p=t&&t.array[i],l=go(p,e,r-k,n,o,a);return l===p?t:(u=fe(t,e),u.array[i]=l,u)}return s&&t.array[i]===o?t:(a&&it(a),u=fe(t,e),o===void 0&&i===u.array.length-1?u.array.pop():u.array[i]=o,u)}function fe(t,e){return e&&t&&e===t.ownerID?t:new Bt(t?t.array.slice():[],e)}function Xs(t,e){if(e>=Je(t._capacity))return t._tail;if(e<1<<t._level+k){for(var r=t._root,n=t._level;r&&n>0;)r=r.array[e>>>n&U],n-=k;return r}}function At(t,e,r){e!==void 0&&(e|=0),r!==void 0&&(r|=0);var n=t.__ownerID||new vo,o=t._origin,a=t._capacity,i=o+e,s=r===void 0?a:r<0?a+r:o+r;if(i===o&&s===a)return t;if(i>=s)return t.clear();for(var u=t._level,p=t._root,l=0;i+l<0;)p=new Bt(p&&p.array.length?[void 0,p]:[],n),u+=k,l+=1<<u;l&&(i+=l,o+=l,s+=l,a+=l);for(var f=Je(a),c=Je(s);c>=1<<u+k;)p=new Bt(p&&p.array.length?[p]:[],n),u+=k;var d=t._tail,m=c<f?Xs(t,s-1):c>f?new Bt([],n):d;if(d&&c>f&&i<a&&d.array.length){p=fe(p,n);for(var h=p,_=u;_>k;_-=k){var v=f>>>_&U;h=h.array[v]=fe(h.array[v],n);}h.array[f>>>k&U]=d;}if(s<a&&(m=m&&m.removeAfter(n,0,s)),i>=c)i-=c,s-=c,u=k,p=null,m=m&&m.removeBefore(n,0,i);else if(i>o||c<f){for(l=0;p;){var I=i>>>u&U;if(I!==c>>>u&U)break;I&&(l+=(1<<u)*I),u-=k,p=p.array[I];}p&&i>o&&(p=p.removeBefore(n,u,i-l)),p&&c<f&&(p=p.removeAfter(n,u,c-l)),l&&(i-=l,s-=l);}return t.__ownerID?(t.size=s-i,t._origin=i,t._capacity=s,t._level=u,t._root=p,t._tail=m,t.__hash=void 0,t.__altered=!0,t):Xe(i,s,u,p,m)}function Je(t){return t<ot?0:t-1>>>k<<k}var wt=function(t){function e(r){return r==null?qe():bs(r)?r:qe().withMutations(function(n){var o=st(r);Q(o.size),o.forEach(function(a,i){return n.set(i,a)});})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("OrderedMap {","}")},e.prototype.get=function(n,o){var a=this._map.get(n);return a!==void 0?this._list.get(a)[1]:o},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):qe()},e.prototype.set=function(n,o){return rs(this,n,o)},e.prototype.remove=function(n){return rs(this,n,S)},e.prototype.__iterate=function(n,o){var a=this;return this._list.__iterate(function(i){return i&&n(i[1],i[0],a)},o)},e.prototype.__iterator=function(n,o){return this._list.fromEntrySeq().__iterator(n,o)},e.prototype.__ensureOwner=function(n){if(n===this.__ownerID)return this;var o=this._map.__ensureOwner(n),a=this._list.__ensureOwner(n);return n?Ho(o,a,n,this.__hash):this.size===0?qe():(this.__ownerID=n,this.__altered=!1,this._map=o,this._list=a,this)},e}(Se);wt.isOrderedMap=bs;wt.prototype[ye]=!0;wt.prototype[Ye]=wt.prototype.remove;function Ho(t,e,r,n){var o=Object.create(wt.prototype);return o.size=t?t.size:0,o._map=t,o._list=e,o.__ownerID=r,o.__hash=n,o.__altered=!1,o}var es;function qe(){return es||(es=Ho(mt(),Dr()))}function rs(t,e,r){var n=t._map,o=t._list,a=n.get(e),i=a!==void 0,s,u;if(r===S){if(!i)return t;o.size>=ot&&o.size>=n.size*2?(u=o.filter(function(p,l){return p!==void 0&&a!==l}),s=u.toKeyedSeq().map(function(p){return p[0]}).flip().toMap(),t.__ownerID&&(s.__ownerID=u.__ownerID=t.__ownerID)):(s=n.remove(e),u=a===o.size-1?o.pop():o.set(a,void 0));}else if(i){if(r===o.get(a)[1])return t;s=n,u=o.set(a,[e,r]);}else s=n.set(e,o.size),u=o.set(o.size,[e,r]);return t.__ownerID?(t.size=s.size,t._map=s,t._list=u,t.__hash=void 0,t.__altered=!0,t):Ho(s,u)}var Js="@@__IMMUTABLE_STACK__@@";function yo(t){return !!(t&&t[Js])}var Vo=function(t){function e(r){return r==null?Or():yo(r)?r:Or().pushAll(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("Stack [","]")},e.prototype.get=function(n,o){var a=this._head;for(n=Rt(this,n);a&&n--;)a=a.next;return a?a.value:o},e.prototype.peek=function(){return this._head&&this._head.value},e.prototype.push=function(){var n=arguments;if(arguments.length===0)return this;for(var o=this.size+arguments.length,a=this._head,i=arguments.length-1;i>=0;i--)a={value:n[i],next:a};return this.__ownerID?(this.size=o,this._head=a,this.__hash=void 0,this.__altered=!0,this):We(o,a)},e.prototype.pushAll=function(n){if(n=t(n),n.size===0)return this;if(this.size===0&&yo(n))return n;Q(n.size);var o=this.size,a=this._head;return n.__iterate(function(i){o++,a={value:i,next:a};},!0),this.__ownerID?(this.size=o,this._head=a,this.__hash=void 0,this.__altered=!0,this):We(o,a)},e.prototype.pop=function(){return this.slice(1)},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Or()},e.prototype.slice=function(n,o){if(Nr(n,o,this.size))return this;var a=je(n,this.size),i=qr(o,this.size);if(i!==this.size)return t.prototype.slice.call(this,n,o);for(var s=this.size-a,u=this._head;a--;)u=u.next;return this.__ownerID?(this.size=s,this._head=u,this.__hash=void 0,this.__altered=!0,this):We(s,u)},e.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?We(this.size,this._head,n,this.__hash):this.size===0?Or():(this.__ownerID=n,this.__altered=!1,this)},e.prototype.__iterate=function(n,o){var a=this;if(o)return new Qt(this.toArray()).__iterate(function(u,p){return n(u,p,a)},o);for(var i=0,s=this._head;s&&n(s.value,i++,this)!==!1;)s=s.next;return i},e.prototype.__iterator=function(n,o){if(o)return new Qt(this.toArray()).__iterator(n,o);var a=0,i=this._head;return new w(function(){if(i){var s=i.value;return i=i.next,A(n,a++,s)}return J()})},e}(te);Vo.isStack=yo;var K=Vo.prototype;K[Js]=!0;K.shift=K.pop;K.unshift=K.push;K.unshiftAll=K.pushAll;K.withMutations=Qe;K.wasAltered=$o;K.asImmutable=er;K["@@transducer/init"]=K.asMutable=tr;K["@@transducer/step"]=function(t,e){return t.unshift(e)};K["@@transducer/result"]=function(t){return t.asImmutable()};function We(t,e,r,n){var o=Object.create(K);return o.size=t,o._head=e,o.__ownerID=r,o.__hash=n,o.__altered=!1,o}var ns;function Or(){return ns||(ns=We(0))}var Ys="@@__IMMUTABLE_SET__@@";function Uo(t){return !!(t&&t[Ys])}function js(t){return Uo(t)&&dt(t)}function Zs(t,e){if(t===e)return !0;if(!X(e)||t.size!==void 0&&e.size!==void 0&&t.size!==e.size||t.__hash!==void 0&&e.__hash!==void 0&&t.__hash!==e.__hash||z(t)!==z(e)||G(t)!==G(e)||dt(t)!==dt(e))return !1;if(t.size===0&&e.size===0)return !0;var r=!Wr(t);if(dt(t)){var n=t.entries();return e.every(function(u,p){var l=n.next().value;return l&&tt(l[1],u)&&(r||tt(l[0],p))})&&n.next().done}var o=!1;if(t.size===void 0)if(e.size===void 0)typeof t.cacheResult=="function"&&t.cacheResult();else {o=!0;var a=t;t=e,e=a;}var i=!0,s=e.__iterate(function(u,p){if(r?!t.has(u):o?!tt(u,t.get(p,S)):!tt(t.get(p,S),u))return i=!1,!1});return i&&t.size===s}function ee(t,e){var r=function(n){t.prototype[n]=e[n];};return Object.keys(e).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(r),t}function $r(t){if(!t||typeof t!="object")return t;if(!X(t)){if(!Ot(t))return t;t=et(t);}if(z(t)){var e={};return t.__iterate(function(n,o){e[o]=$r(n);}),e}var r=[];return t.__iterate(function(n){r.push($r(n));}),r}var Xr=function(t){function e(r){return r==null?He():Uo(r)&&!dt(r)?r:He().withMutations(function(n){var o=t(r);Q(o.size),o.forEach(function(a){return n.add(a)});})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(n){return this(st(n).keySeq())},e.intersect=function(n){return n=R(n).toArray(),n.length?N.intersect.apply(e(n.pop()),n):He()},e.union=function(n){return n=R(n).toArray(),n.length?N.union.apply(e(n.pop()),n):He()},e.prototype.toString=function(){return this.__toString("Set {","}")},e.prototype.has=function(n){return this._map.has(n)},e.prototype.add=function(n){return Fr(this,this._map.set(n,n))},e.prototype.remove=function(n){return Fr(this,this._map.remove(n))},e.prototype.clear=function(){return Fr(this,this._map.clear())},e.prototype.map=function(n,o){var a=this,i=!1,s=Fr(this,this._map.mapEntries(function(u){var p=u[1],l=n.call(o,p,p,a);return l!==p&&(i=!0),[l,l]},o));return i?s:this},e.prototype.union=function(){for(var n=[],o=arguments.length;o--;)n[o]=arguments[o];return n=n.filter(function(a){return a.size!==0}),n.length===0?this:this.size===0&&!this.__ownerID&&n.length===1?this.constructor(n[0]):this.withMutations(function(a){for(var i=0;i<n.length;i++)typeof n[i]=="string"?a.add(n[i]):t(n[i]).forEach(function(s){return a.add(s)});})},e.prototype.intersect=function(){for(var n=[],o=arguments.length;o--;)n[o]=arguments[o];if(n.length===0)return this;n=n.map(function(i){return t(i)});var a=[];return this.forEach(function(i){n.every(function(s){return s.includes(i)})||a.push(i);}),this.withMutations(function(i){a.forEach(function(s){i.remove(s);});})},e.prototype.subtract=function(){for(var n=[],o=arguments.length;o--;)n[o]=arguments[o];if(n.length===0)return this;n=n.map(function(i){return t(i)});var a=[];return this.forEach(function(i){n.some(function(s){return s.includes(i)})&&a.push(i);}),this.withMutations(function(i){a.forEach(function(s){i.remove(s);});})},e.prototype.sort=function(n){return It(pe(this,n))},e.prototype.sortBy=function(n,o){return It(pe(this,o,n))},e.prototype.wasAltered=function(){return this._map.wasAltered()},e.prototype.__iterate=function(n,o){var a=this;return this._map.__iterate(function(i){return n(i,i,a)},o)},e.prototype.__iterator=function(n,o){return this._map.__iterator(n,o)},e.prototype.__ensureOwner=function(n){if(n===this.__ownerID)return this;var o=this._map.__ensureOwner(n);return n?this.__make(o,n):this.size===0?this.__empty():(this.__ownerID=n,this._map=o,this)},e}(he);Xr.isSet=Uo;var N=Xr.prototype;N[Ys]=!0;N[Ye]=N.remove;N.merge=N.concat=N.union;N.withMutations=Qe;N.asImmutable=er;N["@@transducer/init"]=N.asMutable=tr;N["@@transducer/step"]=function(t,e){return t.add(e)};N["@@transducer/result"]=function(t){return t.asImmutable()};N.__empty=He;N.__make=Qs;function Fr(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:e.size===0?t.__empty():t.__make(e)}function Qs(t,e){var r=Object.create(N);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}var os;function He(){return os||(os=Qs(mt()))}var ed=function(t){function e(r,n,o){if(!(this instanceof e))return new e(r,n,o);if(To(o!==0,"Cannot step a Range by 0"),r=r||0,n===void 0&&(n=1/0),o=o===void 0?1:Math.abs(o),n<r&&(o=-o),this._start=r,this._end=n,this._step=o,this.size=Math.max(0,Math.ceil((n-r)/o-1)+1),this.size===0){if(so)return so;so=this;}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},e.prototype.get=function(n,o){return this.has(n)?this._start+Rt(this,n)*this._step:o},e.prototype.includes=function(n){var o=(n-this._start)/this._step;return o>=0&&o<this.size&&o===Math.floor(o)},e.prototype.slice=function(n,o){return Nr(n,o,this.size)?this:(n=je(n,this.size),o=qr(o,this.size),o<=n?new e(0,0):new e(this.get(n,this._end),this.get(o,this._end),this._step))},e.prototype.indexOf=function(n){var o=n-this._start;if(o%this._step===0){var a=o/this._step;if(a>=0&&a<this.size)return a}return -1},e.prototype.lastIndexOf=function(n){return this.indexOf(n)},e.prototype.__iterate=function(n,o){for(var a=this.size,i=this._step,s=o?this._start+(a-1)*i:this._start,u=0;u!==a&&n(s,o?a-++u:u++,this)!==!1;)s+=o?-i:i;return u},e.prototype.__iterator=function(n,o){var a=this.size,i=this._step,s=o?this._start+(a-1)*i:this._start,u=0;return new w(function(){if(u===a)return J();var p=s;return s+=o?-i:i,A(n,o?a-++u:u++,p)})},e.prototype.equals=function(n){return n instanceof e?this._start===n._start&&this._end===n._end&&this._step===n._step:Zs(this,n)},e}(gt),so;function tu(t,e,r){for(var n=Os(e),o=0;o!==n.length;)if(t=Fs(t,n[o++],S),t===S)return r;return t}function eu(t,e){return tu(this,t,e)}function rd(t,e){return tu(t,e,S)!==S}function nd(t){return rd(this,t)}function ru(){Q(this.size);var t={};return this.__iterate(function(e,r){t[r]=e;}),t}R.isIterable=X;R.isKeyed=z;R.isIndexed=G;R.isAssociative=Wr;R.isOrdered=dt;R.Iterator=w;ee(R,{toArray:function(){Q(this.size);var e=new Array(this.size||0),r=z(this),n=0;return this.__iterate(function(o,a){e[n++]=r?[a,o]:o;}),e},toIndexedSeq:function(){return new Cs(this)},toJS:function(){return $r(this)},toKeyedSeq:function(){return new Kr(this,!0)},toMap:function(){return Se(this.toKeyedSeq())},toObject:ru,toOrderedMap:function(){return wt(this.toKeyedSeq())},toOrderedSet:function(){return It(z(this)?this.valueSeq():this)},toSet:function(){return Xr(z(this)?this.valueSeq():this)},toSetSeq:function(){return new Ms(this)},toSeq:function(){return G(this)?this.toIndexedSeq():z(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Vo(z(this)?this.valueSeq():this)},toList:function(){return Gr(z(this)?this.valueSeq():this)},toString:function(){return "[Collection]"},__toString:function(e,r){return this.size===0?e+r:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+r},concat:function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return E(this,Bm(this,e))},includes:function(e){return this.some(function(r){return tt(r,e)})},entries:function(){return this.__iterator(at)},every:function(e,r){Q(this.size);var n=!0;return this.__iterate(function(o,a,i){if(!e.call(r,o,a,i))return n=!1,!1}),n},filter:function(e,r){return E(this,zs(this,e,r,!0))},partition:function(e,r){return zm(this,e,r)},find:function(e,r,n){var o=this.findEntry(e,r);return o?o[1]:n},forEach:function(e,r){return Q(this.size),this.__iterate(r?e.bind(r):e)},join:function(e){Q(this.size),e=e!==void 0?""+e:",";var r="",n=!0;return this.__iterate(function(o){n?n=!1:r+=e,r+=o!=null?o.toString():"";}),r},keys:function(){return this.__iterator(Ze)},map:function(e,r){return E(this,Ts(this,e,r))},reduce:function(e,r,n){return is(this,e,r,n,arguments.length<2,!1)},reduceRight:function(e,r,n){return is(this,e,r,n,arguments.length<2,!0)},reverse:function(){return E(this,Co(this,!0))},slice:function(e,r){return E(this,Mo(this,e,r,!0))},some:function(e,r){Q(this.size);var n=!1;return this.__iterate(function(o,a,i){if(e.call(r,o,a,i))return n=!0,!1}),n},sort:function(e){return E(this,pe(this,e))},values:function(){return this.__iterator(ht)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return !0})},count:function(e,r){return ue(e?this.toSeq().filter(e,r):this)},countBy:function(e,r){return km(this,e,r)},equals:function(e){return Zs(this,e)},entrySeq:function(){var e=this;if(e._cache)return new Qt(e._cache);var r=e.toSeq().map(id).toIndexedSeq();return r.fromEntrySeq=function(){return e.toSeq()},r},filterNot:function(e,r){return this.filter(uo(e),r)},findEntry:function(e,r,n){var o=n;return this.__iterate(function(a,i,s){if(e.call(r,a,i,s))return o=[i,a],!1}),o},findKey:function(e,r){var n=this.findEntry(e,r);return n&&n[0]},findLast:function(e,r,n){return this.toKeyedSeq().reverse().find(e,r,n)},findLastEntry:function(e,r,n){return this.toKeyedSeq().reverse().findEntry(e,r,n)},findLastKey:function(e,r){return this.toKeyedSeq().reverse().findKey(e,r)},first:function(e){return this.find(cs,null,e)},flatMap:function(e,r){return E(this,Rm(this,e,r))},flatten:function(e){return E(this,Bs(this,e,!0))},fromEntrySeq:function(){return new Ps(this)},get:function(e,r){return this.find(function(n,o){return tt(o,e)},void 0,r)},getIn:eu,groupBy:function(e,r){return Tm(this,e,r)},has:function(e){return this.get(e,S)!==S},hasIn:nd,isSubset:function(e){return e=typeof e.includes=="function"?e:R(e),this.every(function(r){return e.includes(r)})},isSuperset:function(e){return e=typeof e.isSubset=="function"?e:R(e),e.isSubset(this)},keyOf:function(e){return this.findKey(function(r){return tt(r,e)})},keySeq:function(){return this.toSeq().map(od).toIndexedSeq()},last:function(e){return this.toSeq().reverse().first(e)},lastKeyOf:function(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function(e){return Br(this,e)},maxBy:function(e,r){return Br(this,r,e)},min:function(e){return Br(this,e?as(e):us)},minBy:function(e,r){return Br(this,r?as(r):us,e)},rest:function(){return this.slice(1)},skip:function(e){return e===0?this:this.slice(Math.max(0,e))},skipLast:function(e){return e===0?this:this.slice(0,-Math.max(0,e))},skipWhile:function(e,r){return E(this,As(this,e,r,!0))},skipUntil:function(e,r){return this.skipWhile(uo(e),r)},sortBy:function(e,r){return E(this,pe(this,r,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return this.slice(-Math.max(0,e))},takeWhile:function(e,r){return E(this,Am(this,e,r))},takeUntil:function(e,r){return this.takeWhile(uo(e),r)},update:function(e){return e(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=ad(this))}});var W=R.prototype;W[ds]=!0;W[Hr]=W.values;W.toJSON=W.toArray;W.__toStringMapper=Ue;W.inspect=W.toSource=function(){return this.toString()};W.chain=W.flatMap;W.contains=W.includes;ee(st,{flip:function(){return E(this,ks(this))},mapEntries:function(e,r){var n=this,o=0;return E(this,this.toSeq().map(function(a,i){return e.call(r,[i,a],o++,n)}).fromEntrySeq())},mapKeys:function(e,r){var n=this;return E(this,this.toSeq().flip().map(function(o,a){return e.call(r,o,a,n)}).flip())}});var rr=st.prototype;rr[hs]=!0;rr[Hr]=W.entries;rr.toJSON=ru;rr.__toStringMapper=function(t,e){return Ue(e)+": "+Ue(t)};ee(te,{toKeyedSeq:function(){return new Kr(this,!1)},filter:function(e,r){return E(this,zs(this,e,r,!1))},findIndex:function(e,r){var n=this.findEntry(e,r);return n?n[0]:-1},indexOf:function(e){var r=this.keyOf(e);return r===void 0?-1:r},lastIndexOf:function(e){var r=this.lastKeyOf(e);return r===void 0?-1:r},reverse:function(){return E(this,Co(this,!1))},slice:function(e,r){return E(this,Mo(this,e,r,!1))},splice:function(e,r){var n=arguments.length;if(r=Math.max(r||0,0),n===0||n===2&&!r)return this;e=je(e,e<0?this.count():this.size);var o=this.slice(0,e);return E(this,n===1?o:o.concat(yt(arguments,2),this.slice(e+r)))},findLastIndex:function(e,r){var n=this.findLastEntry(e,r);return n?n[0]:-1},first:function(e){return this.get(0,e)},flatten:function(e){return E(this,Bs(this,e,!1))},get:function(e,r){return e=Rt(this,e),e<0||this.size===1/0||this.size!==void 0&&e>this.size?r:this.find(function(n,o){return o===e},void 0,r)},has:function(e){return e=Rt(this,e),e>=0&&(this.size!==void 0?this.size===1/0||e<this.size:this.indexOf(e)!==-1)},interpose:function(e){return E(this,Om(this,e))},interleave:function(){var e=[this].concat(yt(arguments)),r=Rr(this.toSeq(),gt.of,e),n=r.flatten(!0);return r.size&&(n.size=r.size*e.length),E(this,n)},keySeq:function(){return ed(0,this.size)},last:function(e){return this.get(-1,e)},skipWhile:function(e,r){return E(this,As(this,e,r,!1))},zip:function(){var e=[this].concat(yt(arguments));return E(this,Rr(this,ss,e))},zipAll:function(){var e=[this].concat(yt(arguments));return E(this,Rr(this,ss,e,!0))},zipWith:function(e){var r=yt(arguments);return r[0]=this,E(this,Rr(this,e,r))}});var we=te.prototype;we[gs]=!0;we[ye]=!0;ee(he,{get:function(e,r){return this.has(e)?e:r},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}});var me=he.prototype;me.has=W.includes;me.contains=me.includes;me.keys=me.values;ee(Ft,rr);ee(gt,we);ee(ve,me);function is(t,e,r,n,o,a){return Q(t.size),t.__iterate(function(i,s,u){o?(o=!1,r=i):r=e.call(n,r,i,s,u);},a),r}function od(t,e){return e}function id(t,e){return [e,t]}function uo(t){return function(){return !t.apply(this,arguments)}}function as(t){return function(){return -t.apply(this,arguments)}}function ss(){return yt(arguments)}function us(t,e){return t<e?1:t>e?-1:0}function ad(t){if(t.size===1/0)return 0;var e=dt(t),r=z(t),n=e?1:0,o=t.__iterate(r?e?function(a,i){n=31*n+ps(Z(a),Z(i))|0;}:function(a,i){n=n+ps(Z(a),Z(i))|0;}:e?function(a){n=31*n+Z(a)|0;}:function(a){n=n+Z(a)|0;});return sd(o,n)}function sd(t,e){return e=Ne(e,3432918353),e=Ne(e<<15|e>>>-15,461845907),e=Ne(e<<13|e>>>-13,5),e=(e+3864292196|0)^t,e=Ne(e^e>>>16,2246822507),e=Ne(e^e>>>13,3266489909),e=Ur(e^e>>>16),e}function ps(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}var It=function(t){function e(r){return r==null?_o():js(r)?r:_o().withMutations(function(n){var o=he(r);Q(o.size),o.forEach(function(a){return n.add(a)});})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(n){return this(st(n).keySeq())},e.prototype.toString=function(){return this.__toString("OrderedSet {","}")},e}(Xr);It.isOrderedSet=js;var re=It.prototype;re[ye]=!0;re.zip=we.zip;re.zipWith=we.zipWith;re.zipAll=we.zipAll;re.__empty=_o;re.__make=nu;function nu(t,e){var r=Object.create(re);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}var ls;function _o(){return ls||(ls=nu(qe()))}function ud(t){if(ge(t))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(_t(t))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(t===null||typeof t!="object")throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}var L=function(e,r){var n;ud(e);var o=function(s){var u=this;if(s instanceof o)return s;if(!(this instanceof o))return new o(s);if(!n){n=!0;var p=Object.keys(e),l=a._indices={};a._name=r,a._keys=p,a._defaultValues=e;for(var f=0;f<p.length;f++){var c=p[f];l[c]=f,a[c]?typeof console=="object"&&console.warn&&console.warn("Cannot define "+Go(this)+' with property "'+c+'" since that property name is part of the Record API.'):pd(a,c);}}return this.__ownerID=void 0,this._values=Gr().withMutations(function(d){d.setSize(u._keys.length),st(s).forEach(function(m,h){d.set(u._indices[h],m===u._defaultValues[h]?void 0:m);});}),this},a=o.prototype=Object.create(M);return a.constructor=o,r&&(o.displayName=r),o};L.prototype.toString=function(){for(var e=Go(this)+" { ",r=this._keys,n,o=0,a=r.length;o!==a;o++)n=r[o],e+=(o?", ":"")+n+": "+Ue(this.get(n));return e+" }"};L.prototype.equals=function(e){return this===e||ge(e)&&de(this).equals(de(e))};L.prototype.hashCode=function(){return de(this).hashCode()};L.prototype.has=function(e){return this._indices.hasOwnProperty(e)};L.prototype.get=function(e,r){if(!this.has(e))return r;var n=this._indices[e],o=this._values.get(n);return o===void 0?this._defaultValues[e]:o};L.prototype.set=function(e,r){if(this.has(e)){var n=this._values.set(this._indices[e],r===this._defaultValues[e]?void 0:r);if(n!==this._values&&!this.__ownerID)return Ko(this,n)}return this};L.prototype.remove=function(e){return this.set(e)};L.prototype.clear=function(){var e=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:Ko(this,e)};L.prototype.wasAltered=function(){return this._values.wasAltered()};L.prototype.toSeq=function(){return de(this)};L.prototype.toJS=function(){return $r(this)};L.prototype.entries=function(){return this.__iterator(at)};L.prototype.__iterator=function(e,r){return de(this).__iterator(e,r)};L.prototype.__iterate=function(e,r){return de(this).__iterate(e,r)};L.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var r=this._values.__ensureOwner(e);return e?Ko(this,r,e):(this.__ownerID=e,this._values=r,this)};L.isRecord=ge;L.getDescriptiveName=Go;var M=L.prototype;M[_s]=!0;M[Ye]=M.remove;M.deleteIn=M.removeIn=Ao;M.getIn=eu;M.hasIn=W.hasIn;M.merge=$s;M.mergeWith=Ns;M.mergeIn=Do;M.mergeDeep=Ws;M.mergeDeepWith=Hs;M.mergeDeepIn=Lo;M.setIn=zo;M.update=Bo;M.updateIn=Ro;M.withMutations=Qe;M.asMutable=tr;M.asImmutable=er;M[Hr]=M.entries;M.toJSON=M.toObject=W.toObject;M.inspect=M.toSource=function(){return this.toString()};function Ko(t,e,r){var n=Object.create(Object.getPrototypeOf(t));return n._values=e,n.__ownerID=r,n}function Go(t){return t.constructor.displayName||t.constructor.name||"Record"}function de(t){return Io(t._keys.map(function(e){return [e,t.get(e)]}))}function pd(t,e){try{Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(r){To(this.__ownerID,"Cannot set on an immutable record."),this.set(e,r);}});}catch{}}function ne({children:t,className:e,clipboardValue:r,sx:n,sxChildren:o,title:a}){let i=useTheme();return jsxs(Cr,{spacing:a?1.5:0,sx:ou({width:"100%",flex:1,overflowY:"auto"},n),children:[jsx(Me,{fontSize:"14px",fontWeight:700,color:g[400],children:a}),jsxs(nr,{className:e,sx:ou({position:"relative",fontFamily:s=>s.typography.fontFamily,fontSize:"16px",lineHeight:"24px",padding:3,paddingRight:4,border:`1.5px solid ${i.palette.divider}`,borderRadius:"8px",overflowY:"auto",flexGrow:1,caretColor:i.palette.text.primary,backgroundColor:i.palette.background.paper,"&:hover":{borderColor:i.palette.mode==="light"?g[400]:"white"}},o),children:[r?jsx(nr,{sx:{position:"absolute",right:0,top:0,color:"text.secondary"},children:jsx(Xt,{value:r})}):null,t]})]})}var _d=["Assistant","System","User"],vd=({canSelectRole:t,children:e,index:r,message:n,role:o,name:a})=>{let[i,s]=useState(!1),{setPlayground:u}=useContext(C),p=c=>{let d=c.target.value;d&&u(m=>({...m,generation:{...m.generation,messages:m.generation.messages?.map((h,_)=>({...h,..._===r?{role:d}:{}}))}})),s(!1);},l=()=>{r!==void 0&&u(c=>({...c,generation:{...c.generation,messages:[...c.generation.messages.slice(0,r),...c.generation.messages.slice(r+1)]}}));},f=jsxs(nr,{sx:{flex:1,paddingLeft:2},children:[i?jsx(j,{onClose:()=>s(!1),defaultOpen:!0,items:_d.map(c=>({label:c,value:c.toLowerCase()})),id:"role-select",value:n?.role,onChange:p,sx:{width:"fit-content"},iconSx:{px:0,marginRight:"2px !important"}}):jsx(Me,{onClick:()=>t&&s(!0),color:"text.primary",sx:{p:1,borderRadius:.5,marginTop:1,cursor:t?"pointer":"default",fontSize:"12px",fontWeight:700,width:"fit-content",...t&&{"&:hover":{backgroundColor:c=>c.palette.divider}}},children:o}),a?jsx(Me,{color:"text.secondary",variant:"caption",sx:{ml:1,width:"fit-content"},children:a}):null]});return jsxs(nr,{children:[jsx(nr,{sx:{border:c=>`1px solid ${c.palette.divider}`,borderRadius:1}}),jsxs(Cr,{direction:"row",width:"100%",sx:{gap:2,flex:10,paddingY:1,"&:hover":{background:c=>c.palette.background.paper}},children:[f,jsx(nr,{flex:8,children:e}),r!==void 0?jsx(nr,{color:"text.secondary",children:jsx(Xn,{color:"inherit",onClick:l,children:jsx(hd,{sx:{height:18,width:18}})})}):null]})]},r)},Jr=vd;function ir({completion:t,chatMode:e}){let[r,n]=useState(EditorState.createEmpty()),[o,a]=useState(!0);useEffect(()=>{let u=EditorState.createEmpty();t&&(u=i(u,t)),n(u),a(!0);},[t]);let i=(u,p)=>{let l=u.getCurrentContent(),f=l.getBlockMap(),c=f.last().getKey(),d=f.last().getLength(),m=new SelectionState({anchorKey:c,anchorOffset:d,focusKey:c,focusOffset:d}),h=Modifier.insertText(l,m,p,It.of("COMPLETION")),_=EditorState.push(u,h,"insert-characters");return EditorState.forceSelection(_,h.getSelectionAfter())},s=()=>jsx(ne,{className:"completion-editor",clipboardValue:r.getCurrentContent().getPlainText(),sxChildren:{borderColor:u=>u.palette.success.main,"&:hover":{borderColor:u=>u.palette.success.main}},children:jsx(Editor,{editorState:r,onChange:u=>{u=EditorState.push(u,r.getCurrentContent(),"insert-characters"),n(u);}})});return e?jsx(Jr,{role:"ASSISTANT",children:s()}):jsxs(nr,{marginTop:2,children:[jsxs(Cr,{sx:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingRight:"6px"},children:[jsx(nr,{fontSize:"14px",fontWeight:700,color:g[400],children:"Completion"}),jsx(Xn,{onClick:()=>a(!o),children:o?jsx(Jc,{}):jsx(Yc,{})})]}),jsx(nr,{sx:{border:u=>`1px solid ${u.palette.divider}`,borderRadius:1,marginTop:1}}),jsx(nr,{sx:{maxHeight:o?"220px":"0px",transition:"max-height 0.5s ease-in-out",overflow:"auto",marginTop:2},children:s()})]})}function lu(t,e){switch(e){case"f-string":return new RegExp(`\\{+(${t}+)\\}+`,"g");default:throw new Error(`Unsupported template format ${e}`)}}function cu(t,e){switch(e){case"f-string":return t=t.replaceAll("{{","{"),t=t.replaceAll("}}","}"),t;default:throw new Error(`Unsupported template format ${e}`)}}function fu(t){switch(t){case"f-string":return /\{+([^{}]+)\}+|{{|}}/g;default:throw new Error(`Unsupported template format ${t}`)}}function kd(t,e){switch(e){case"f-string":return `{${t}}`;default:throw new Error(`Unsupported template format ${e}`)}}function jo(t,e,r){switch(r){case"f-string":{let n=e.split(t)[0].length,o=e.split(t)[1].length,i=n%2&&n===o,s=kd(t,r),u=e.indexOf(s),p=u+s.length;return {ok:i,localStartIndex:u,localEndIndex:p}}default:throw new Error(`Unsupported template format ${r}`)}}function Fd(){let t=vr(!0),e={};for(let r=0;r<t.length;r++)e[r.toString()]={background:t[r],borderRadius:"2px",cursor:"pointer"};return e}function Dd(t,e){let r=fu(e),n=[],o;for(;(o=r.exec(t))!==null;)o.index>-1&&n.push(o);return n}function Ld(t,e,r){let a=lu(e,r).exec(t)?.[0];if(a){let{ok:i}=jo(e,a,r);return {match:a,ok:i}}else return {match:"",ok:!1}}function $d(t,e,r){let n=t.getCurrentContent(),o=t;return n.getBlockMap().forEach(a=>{if(!a)return;let i=a.getKey(),s=a.getText(),u=Dd(s,r),p=0,l=u.map(c=>{let d=c[0],m;for(let x of e){let{match:P,ok:b}=Ld(d,x.name,r);if(b){m={variable:x,match:P};break}}let h=c.index+p,_=h+d.length,v=new SelectionState({anchorKey:i,anchorOffset:h,focusKey:i,focusOffset:_}),I=cu(d,r);return p+=I.length-d.length,n=Modifier.replaceText(n,v,I),o=EditorState.push(t,n,"apply-entity"),c[0]=I,c.index=h,{ssm:c,variableFound:m}}),f=0;l.forEach(({ssm:c,variableFound:d})=>{if(!d)return;let{variable:m}=d,h=c[0],_=o.getSelection(),{localEndIndex:v,localStartIndex:I}=jo(m.name,h,r),x=c.index+I+f,P=c.index+v+f,b=new SelectionState({anchorKey:i,anchorOffset:x,focusKey:i,focusOffset:P}),q=m.content||"";f+=q.length-(v-I),n=o.getCurrentContent(),n=n.createEntity("TOKEN","SEGMENTED",m);let ut=n.getLastCreatedEntityKey();n=Modifier.replaceText(n,b,q,It.of(m.styleIndex.toString()),ut),o=EditorState.push(o,n,"apply-entity"),o=EditorState.forceSelection(o,_);});}),o}function Nd(t){let e=t.getSelection(),r=e.getStartKey(),n=t.getCurrentContent(),o=n.getBlockForKey(r);if(!o)return;let a=o.getEntityAt(e.getStartOffset());if(a){let i=n.getEntity(a);return {type:i.getType(),mutability:i.getMutability(),data:i.getData()}}}function ar({template:t,formatted:e,inputs:r,format:n,readOnly:o,onChange:a,showTitle:i=!1,sxEditorChildren:s}){let u=useRef(null),{setVariableName:p,setPromptMode:l,onNotification:f}=useContext(C),[c,d]=useState(),[m,h]=useState(),_=Fd();if(useIsFirstRender()||!zd(r,m)){if(typeof t=="string"){r=r||{};let P=Object.keys(r),b=[];for(let Ct=0;Ct<P.length;Ct++){let pr=P[Ct],Bu=r[pr];b.push({name:pr,styleIndex:Ct,content:Bu});}let q=b.sort((Ct,pr)=>pr.name.length-Ct.name.length),ut=EditorState.createWithContent(ContentState.createFromText(t)),Wt=$d(ut,q,n);d(Wt);}else if(typeof e=="string"){let P=EditorState.createWithContent(ContentState.createFromText(e));d(P);}h(r);}let I=P=>{let b=P.getSelection().getHasFocus(),q=P.getSelection().isCollapsed(),ut=Nd(P);if(ut&&b&&q&&u.current&&(p(ut.data.name),u.current.blur()),!o)a&&a(P);else if(c){let Wt=c.getCurrentContent(),Ct=P.getCurrentContent();Wt!==Ct&&(f("error","Formatted prompt is read only. Edit the template/variables instead."),l("Template")),P=EditorState.push(P,Wt,"insert-characters");}d(P);};return c?jsx(ne,{className:"formatted-editor",title:i?o?"Formatted prompt [Read Only]":"Formatted prompt":void 0,clipboardValue:c?.getCurrentContent().getPlainText(),sxChildren:ou(s||{},o?{caretColor:"transparent",backgroundColor:"transparent",borderColor:"transparent !important"}:{}),children:jsx(Editor,{ref:u,customStyleMap:_,editorState:c,onChange:I})}):null}function Qo({generation:t,restoredTime:e}){let{promptMode:r,setPlayground:n}=useContext(C),o=i=>{let s=i.getCurrentContent().getPlainText();n(u=>({...u,generation:{...u.generation,formatted:s}}));};return jsxs(Cr,{flex:1,width:"100%",children:[r==="Formatted"?typeof t.prompt=="string"?jsx(ar,{showTitle:!0,formatted:t.prompt||"",inputs:t.variables||{},format:"f-string",readOnly:!1,onChange:o}):jsx(zi,{severity:"error",children:"Neither template or formatted prompt provided."}):null,jsx(ir,{completion:t.completion})]},e)}function ti({message:t,generation:e,mode:r,index:n,onChange:o}){let a=useTheme(),i={inputs:e.variables||{},format:"f-string",sxEditorChildren:{padding:a.spacing(2),backgroundColor:"","&:hover":{background:a.palette.background.paper}}},s=()=>typeof t.content=="string"?jsx(ar,{...i,onChange:u=>o(n,u),formatted:t.content,readOnly:!1,showTitle:!1}):jsx(zi,{severity:"error",children:"Neither template or formatted prompt provided."});return jsx(Jr,{canSelectRole:!0,index:n,message:t,role:t.role?.toUpperCase(),name:t.name,children:jsx(Fragment,{children:r==="Formatted"?s():null})})}var t1=forwardRef(({hasTemplate:t,generation:e,restoredTime:r},n)=>{let{promptMode:o,setPlayground:a}=useContext(C),i=e.messages,s=(p,l)=>{let f=l.getCurrentContent().getPlainText();a(c=>({...c,generation:{...c.generation,messages:c.generation.messages?.map((d,m)=>m===p?{...d,content:f}:d)}}));},u=o==="Formatted"?t?"Formatted messages [Read Only]":"Formatted messages":"Prompt messages";return jsxs(Cr,{sx:{width:"100%"},children:[jsx(Me,{fontSize:"14px",fontWeight:700,color:g[400],children:u}),jsxs(nr,{ref:n,sx:{flex:1,height:"auto",overflow:"auto",scrollbarGutter:"stable",marginTop:1,gap:1},children:[i?.length?jsx(Cr,{children:i.map((p,l)=>jsx(Fragment$1,{children:jsx(ti,{message:p,generation:e,mode:o,index:l,onChange:s})},`prompt-message-${l}`))}):null,jsx(nr,{color:"text.secondary",pl:2,py:2,children:jsx(Mi,{onClick:()=>{a(p=>({...p,generation:{...p.generation,messages:[...p.generation.messages,{role:"assistant",content:""}]}}));},color:"inherit",sx:{fontWeight:700,textTransform:"capitalize"},startIcon:jsx(jd,{}),children:"Add Message"})}),jsx(ir,{completion:e.messageCompletion?.content,chatMode:!0})]},r)]})}),Su=t1;var c1=()=>{let{setPlayground:t,playground:e,functionIndex:r,setFunctionIndex:n}=useContext(C),o=useTheme(),a=r!==void 0,i=e?.generation?.functions||[],s=a?i[r]:void 0,u=(l,f)=>{if(r!==void 0&&s){let c={...s,name:l,description:f};t(d=>d?.generation?{...d,generation:{...d.generation,functions:[...i.slice(0,r),c,...i.slice(r+1)]}}:d),n(void 0);}},p=useFormik({initialValues:{name:s?.name,description:s?.description},validationSchema:Et.object({name:Et.string().required(),description:Et.string().required()}),enableReinitialize:!0,onSubmit:async l=>{u(l.name,l.description);}});return jsx(df,{id:"function-modal",open:!!s,onClose:()=>n(void 0),fullWidth:!0,maxWidth:"md",sx:{border:l=>l.palette.mode==="dark"?`1px solid ${g[800]}`:null,borderRadius:1},children:jsxs(nr,{bgcolor:"background.paper",children:[jsx(yf,{children:jsx(Me,{fontSize:"16px",fontWeight:700,color:"text.secondary",children:`Edit function ${s?.name}`})}),jsx(gf,{children:jsxs(Cr,{gap:2,children:[jsx($,{id:"fn-name",label:"Function name",onChange:l=>p.setFieldValue("name",l.target.value),value:p.values.name,hasError:!!p.errors.name}),jsx($,{id:"fn-desc",label:"Function description",multiline:!0,onChange:l=>p.setFieldValue("description",l.target.value),value:p.values.description,hasError:!!p.errors.description})]})}),jsx(hf,{sx:{padding:o.spacing(0,3,2)},children:jsx(ct,{id:"edit-function",variant:"outlined",onClick:()=>p.submitForm(),children:"Save"})})]})})},Iu=c1;var C1=()=>{let[t,e]=useState(),{setPlayground:r,playground:n,variableName:o,setVariableName:a}=useContext(C),i=useTheme();useEffect(()=>{o&&n?.generation?.inputs&&e(EditorState.createWithContent(ContentState.createFromText(n.generation.inputs[o])));},[o]);let s=()=>{o&&(r(p=>p?.generation?{...p,generation:{...p.generation,inputs:{...p?.generation?.inputs,[o]:t?.getCurrentContent().getPlainText()||""}}}:p),a(void 0));},u=()=>{a(void 0);};return o?jsx(df,{id:"variable-modal",open:!!o,onClose:u,fullWidth:!0,maxWidth:"md",sx:{border:p=>p.palette.mode==="dark"?`1px solid ${g[800]}`:null,borderRadius:1},children:jsxs(nr,{bgcolor:"background.paper",children:[jsx(yf,{children:jsx(Me,{fontSize:"16px",fontWeight:700,color:"text.secondary",children:`Edit ${o}`})}),jsxs(gf,{children:[jsx(zi,{sx:{my:1},severity:"info",children:"Editing a variable will update its value in the formatted view. If you want to update the template instead, go to the template view."}),t?jsx(ne,{sx:{minHeight:"250px"},sxChildren:{padding:1},children:jsx(Editor,{customStyleFn:()=>({color:i.palette.text.primary,padding:"2px"}),editorState:t,onChange:p=>{p&&e(p);}})}):null]}),jsx(hf,{sx:{padding:i.spacing(0,3,2)},children:jsx(ct,{id:"edit-variable",onClick:s,variant:"outlined",children:"Save"})})]})}):null},Eu=C1;var P1=()=>{let{functionIndex:t,setFunctionIndex:e,playground:r}=useContext(C),n=r?.generation?.functions||[],o=n.map((a,i)=>({label:a.name,value:i.toString()}));return n?.length>0?jsx(j,{items:o,id:"function-select",value:t!==void 0?t.toString():"",label:"Edit a function",onChange:a=>e(parseInt(a.target.value,10)),sx:{maxWidth:"270px"}}):null},Cu=P1;function ri({hasTemplate:t}){let{setPromptMode:e,promptMode:r}=useContext(C),n=!t,o=jsx(xn,{disabled:n,label:"View",id:"toggle-prompt-mode",value:r,items:["Template","Formatted"],onChange:a=>e(a)});return n?jsx(Jn,{title:"Prompt template not found. Only displaying formatted prompt instead.",children:jsx("span",{children:o})}):o}var R1=()=>{let{variableName:t,setVariableName:e,playground:r}=useContext(C),n=A1(r?.generation?.inputs,(o,a)=>({label:a,value:a}));return n?.length>0?jsx(j,{items:n,id:"variable-select",value:t||"",label:"Edit a variable",onChange:o=>e(o.target.value),sx:{maxWidth:"270px"}}):null},Mu=R1;function ii({hasTemplate:t,showToggleDrawerButton:e,toggleDrawer:r,handleClose:n}){return jsxs(Cr,{direction:"row",alignItems:"center",children:[jsxs(Cr,{direction:"row",alignItems:"center",gap:2,children:[jsx(ri,{hasTemplate:t}),jsx(Mu,{}),jsx(Cu,{})]}),jsxs(Cr,{sx:{ml:"auto"},direction:"row",alignItems:"center",gap:1,children:[jsx(ct,{size:"large",target:"_blank",href:"https://docs.chainlit.io/advanced-features/prompt-playground/overview",children:"Help"}),e?jsx(Xn,{"aria-label":"open drawer",edge:"end",onClick:r,sx:{mr:"4px"},children:jsx(D1,{})}):null,jsx(Xn,{edge:"end",id:"close-playground",onClick:n,children:jsx(lc,{sx:{height:"32px",width:"32px",color:g[500]}})})]})]})}var jr=t=>{let e=t?.providers||[];if(!e?.length)throw new Error("No LLM provider available");let r=e.find(o=>o.id===t.generation?.provider),n=!!r;return r=r||e[0],{provider:r,providerFound:n,providers:e}};var X1=({settings:t,schema:e,provider:r,providers:n,providerTooltip:o,providerWarning:a})=>{let{setPlayground:i}=useContext(C),s=useFormik({initialValues:t,validationSchema:e,enableReinitialize:!0,onSubmit:async()=>{}});useEffect(()=>{let p=setTimeout(()=>{i(l=>({...l,generation:{...l.generation,settings:s.values}}));},500);return ()=>{clearTimeout(p);}},[s.values]);let u=p=>{i(l=>ou($1(l),{generation:{provider:p.target.value}}));};return jsxs(nr,{width:250,sx:{height:"inherit"},children:[jsx(Me,{fontSize:"16px",fontWeight:600,color:"text.primary",children:"Settings"}),jsxs(Cr,{spacing:2,sx:{overflowY:"auto",overflowX:"hidden",height:"100%"},children:[jsx(j,{items:n?.map(p=>({label:p.name,value:p.id})),id:"llm-providers",value:r.id,label:"LLM Provider",tooltip:o,onChange:u}),a,r.inputs.map((p,l)=>jsx(nr,{sx:{paddingBottom:l===r.inputs.length-1?2:0},children:jsx(_n,{element:{...p,id:p.id,value:s.values[p.id],onChange:s.handleChange,setField:s.setFieldValue}})},p.id))]})]})},ku=()=>{let{playground:t}=useContext(C);if(!t||!t?.providers)return null;let{provider:e,providerFound:r,providers:n}=jr(t);if(!e)return null;let o=()=>e.is_chat&&t.generation?.type!=="CHAT"?`${e.name} is chat-based. This prompt will be wrapped in a message before being sent to ${e.name}.`:!e.is_chat&&t.generation?.type==="CHAT"?`${e.name} is completion-based. The messages will converted to a single prompt before being sent to ${e.name}.`:void 0,a=r?null:jsx(zi,{severity:"warning",children:t.generation?.provider?`${t?.generation?.provider} provider is not found, using
      ${e.name} instead.`:`Provider not specified, using ${e.name} instead.`}),i={},s=t?.generation?.settings||{},u=t?.originalGeneration?.settings||{},p=(f,c)=>c.type==="select"?!!c?.items?.find(d=>d.value===f):!0,l=Et.object(e.inputs.reduce((f,c)=>{let d=s[c.id]!==void 0?s[c.id]:u[c.id];switch(d!==void 0&&p(d,c)?i[c.id]=d:c.initial!==void 0&&(i[c.id]=c.initial),c.type){case"select":f[c.id]=Et.string();break;case"slider":{let m=Et.number();c.min&&(m=m.min(c.min)),c.max&&(m=m.max(c.max)),f[c.id]=m;break}case"tags":f[c.id]=Et.array().of(Et.string());break}return f},{}));return jsx(X1,{provider:e,providers:n,providerWarning:a,providerTooltip:o(),schema:l,settings:i})};function si({isSmallScreen:t,isDrawerOpen:e,toggleDrawer:r}){return t?jsxs(cc,{sx:{"& .MuiDrawer-paper":{}},variant:"persistent",anchor:"right",open:e,children:[jsx(nr,{sx:{display:"flex",justifyContent:"flex-end",pt:2,pr:1},children:jsx(Xn,{onClick:r,children:jsx(W1,{})})}),jsx(nr,{px:3,children:jsx(ku,{})})]}):jsx(nr,{ml:"32px !important",height:"100%",children:jsx(ku,{})})}function ui({onSubmit:t}){let[e,r]=useState(),{playground:n,setPlayground:o,createCompletion:a}=useContext(C);if(!n||!n.providers||!a)return null;let i=async()=>{try{let{provider:s}=jr(n),u=$1(n.generation);u.provider=s.id;let p=new AbortController;r(p),o(l=>l?.generation?l.generation.type==="CHAT"?{...l,generation:{...l.generation,messageCompletion:{...l.generation?.messageCompletion||{role:"assistant"},content:""}}}:{...l,generation:{...l.generation,completion:""}}:l),await a(u,p,(l,f)=>{if(t&&t(),l){r(void 0);return}o(c=>c?.generation?c.generation.type==="CHAT"?{...c,generation:{...c.generation,messageCompletion:{...c.generation?.messageCompletion||{role:"assistant"},content:(c.generation?.messageCompletion?.content||"")+f}}}:{...c,generation:{...c.generation,completion:(c.generation?.completion||"")+f}}:c);});}catch{r(void 0);}};return e?jsx(cn,{onClick:()=>{e.abort(),r(void 0);},children:"Cancel"}):jsx(ct,{id:"submit-prompt",variant:"outlined",onClick:i,children:"Submit"})}function ch(){let{playground:t,setPlayground:e}=useContext(C),[r,n]=useState(0),[o,a]=useToggle(!1),i=useRef(null),s=useTheme(),u=hc(s.breakpoints.down("md")),p=u&&!!t?.providers,l=()=>{t?.generation&&(e(h=>({...h,generation:h?.originalGeneration})),n(h=>h+1));},f=()=>{e(h=>({...h,generation:void 0,originalGeneration:void 0}));},c=t?.generation,d=c?.type==="CHAT",m=!1;return c?jsxs(df,{open:!!c,fullScreen:!0,PaperProps:{style:{backgroundColor:s.palette.background.default,backgroundImage:"none"}},onClose:f,id:"playground","aria-labelledby":"playground","aria-describedby":"playground",children:[jsx(yf,{sx:{display:"flex",flexDirection:"column"},children:jsx(ii,{hasTemplate:m,showToggleDrawerButton:p,toggleDrawer:a,handleClose:f})}),jsx(gf,{sx:{display:"flex",direction:"row",padding:3},children:jsxs(Kt,{prefix:"Prompt Playground error",children:[jsx(Cr,{gap:3,width:"100%",children:jsxs(Cr,{direction:"row",spacing:1.5,sx:{overflowY:"auto",paddingBottom:2,height:"100%"},children:[jsx(Iu,{}),jsx(Eu,{}),d?jsx(Su,{ref:i,restoredTime:r,hasTemplate:m,generation:c}):jsx(Qo,{restoredTime:r,hasTemplate:m,generation:c})]})}),jsx(si,{isSmallScreen:u,isDrawerOpen:o,toggleDrawer:a})]})}),jsxs(ro,{children:[c.tokenCount?jsx(Chip,{label:`${c.tokenCount} tokens`}):null,jsx(Jn,{title:"Restore original",children:jsx(Xn,{onClick:l,children:jsx(rh,{})})}),jsx(ui,{onSubmit:()=>{i?.current&&(i.current.scrollTop=i.current.scrollHeight);}})]})]}):null}var yx=({context:t})=>jsx(C.Provider,{value:t,children:jsx(ch,{})});

export { ct as AccentButton, bn as Attachment, Te as AudioElement, _p as AuthForgotPassword, fp as AuthLogin, wp as AuthResetPassword, Cp as AuthVerifyEmail, wn as AvatarElement, Xt as ClipboardCopy, Mn as Code, Qn as Collapse, De as Element, yc as ElementSideView, Ec as ElementView, Kt as ErrorBoundary, ze as FileElement, _n as FormInput, En as FrameElement, ln as GreyButton, Ae as ImageElement, An as InlinedAudioList, Vn as InlinedElements, Rn as InlinedFileList, Fn as InlinedImageList, Ln as InlinedPDFList, Nn as InlinedPlotlyList, Wn as InlinedTextList, Hn as InlinedVideoList, tn as InputLabel, Y as InputStateHandler, oe as Markdown, cm as MessageContainer, be as NotificationCount, Be as PDFElement, Re as PlotlyElement, yx as PromptPlayground, cn as RegularButton, il as SelectCategoryInput, j as SelectInput, dn as SliderInput, gn as SwitchInput, yn as TagsInput, Oe as TextElement, $ as TextInput, xn as Toggle, Fe as VideoElement, Ri as darkGreyButtonTheme, cr as green, g as grey, Oi as lightGreyButtonTheme, fg as makeTheme, pt as primary, vr as useColors, V as useIsDarkMode, mn as useUpload, Mt as white, Fh as yellow };
//# sourceMappingURL=out.js.map
//# sourceMappingURL=index.js.map